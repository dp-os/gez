"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["5969"],{1645:function(e,n,a){a.r(n),a.d(n,{default:()=>d});var o=a(1549),s=a(6603);function i(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",ul:"ul",li:"li",strong:"strong",h2:"h2",pre:"pre",h3:"h3",h4:"h4"},(0,s.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h1,{id:"packconfig",children:["PackConfig",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig",children:"#"})]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"PackConfig"})," \xe9 a interface de configura\xe7\xe3o de empacotamento de pacotes, usada para empacotar os artefatos de constru\xe7\xe3o de um servi\xe7o no formato padr\xe3o .tgz do npm."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Padroniza\xe7\xe3o"}),": Utiliza o formato de empacotamento .tgz padr\xe3o do npm"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Integridade"}),": Inclui todos os arquivos necess\xe1rios, como c\xf3digo-fonte do m\xf3dulo, declara\xe7\xf5es de tipo e arquivos de configura\xe7\xe3o"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Compatibilidade"}),": Totalmente compat\xedvel com o ecossistema npm, suportando fluxos de trabalho padr\xe3o de gerenciamento de pacotes"]}),"\n"]}),"\n",(0,o.jsxs)(n.h2,{id:"defini\\xe7\\xe3o-de-tipo",children:["Defini\xe7\xe3o de Tipo",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#defini\\xe7\\xe3o-de-tipo",children:"#"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"interface PackConfig {\n    enable?: boolean;\n    outputs?: string | string[] | boolean;\n    packageJson?: (gez: Gez, pkg: Record<string, any>) => Promise<Record<string, any>>;\n    onBefore?: (gez: Gez, pkg: Record<string, any>) => Promise<void>;\n    onAfter?: (gez: Gez, pkg: Record<string, any>, file: Buffer) => Promise<void>;\n}\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"packconfig-1",children:["PackConfig",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig-1",children:"#"})]}),"\n",(0,o.jsxs)(n.h4,{id:"enable",children:["enable",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enable",children:"#"})]}),"\n",(0,o.jsx)(n.p,{children:"Habilita ou desabilita a funcionalidade de empacotamento. Quando habilitado, os artefatos de constru\xe7\xe3o s\xe3o empacotados no formato padr\xe3o .tgz do npm."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Tipo: ",(0,o.jsx)(n.code,{children:"boolean"})]}),"\n",(0,o.jsxs)(n.li,{children:["Valor padr\xe3o: ",(0,o.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,o.jsxs)(n.h4,{id:"outputs",children:["outputs",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputs",children:"#"})]}),"\n",(0,o.jsx)(n.p,{children:"Especifica o caminho de sa\xedda do arquivo do pacote. Suporta as seguintes configura\xe7\xf5es:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"string"}),": Um \xfanico caminho de sa\xedda, por exemplo, 'dist/versions/my-app.tgz'"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"string[]"}),": M\xfaltiplos caminhos de sa\xedda, usados para gerar v\xe1rias vers\xf5es simultaneamente"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"boolean"}),": Quando true, usa o caminho padr\xe3o 'dist/client/versions/latest.tgz'"]}),"\n"]}),"\n",(0,o.jsxs)(n.h4,{id:"packagejson",children:["packageJson",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#packagejson",children:"#"})]}),"\n",(0,o.jsx)(n.p,{children:"Fun\xe7\xe3o de callback para personalizar o conte\xfado do package.json. Chamada antes do empacotamento, usada para personalizar o conte\xfado do package.json."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Par\xe2metros:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"gez: Gez"})," - Inst\xe2ncia do Gez"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"pkg: any"})," - Conte\xfado original do package.json"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Retorno: ",(0,o.jsx)(n.code,{children:"Promise<any>"})," - Conte\xfado modificado do package.json"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Usos comuns:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Modificar o nome e a vers\xe3o do pacote"}),"\n",(0,o.jsx)(n.li,{children:"Adicionar ou atualizar depend\xeancias"}),"\n",(0,o.jsx)(n.li,{children:"Adicionar campos personalizados"}),"\n",(0,o.jsx)(n.li,{children:"Configurar informa\xe7\xf5es de publica\xe7\xe3o"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Exemplo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"packageJson: async (gez, pkg) => {\n  // Definir informa\xe7\xf5es do pacote\n  pkg.name = 'my-app';\n  pkg.version = '1.0.0';\n  pkg.description = 'Minha aplica\xe7\xe3o';\n\n  // Adicionar depend\xeancias\n  pkg.dependencies = {\n    'vue': '^3.0.0',\n    'express': '^4.17.1'\n  };\n\n  // Adicionar configura\xe7\xe3o de publica\xe7\xe3o\n  pkg.publishConfig = {\n    registry: 'https://registry.example.com'\n  };\n\n  return pkg;\n}\n"})}),"\n",(0,o.jsxs)(n.h4,{id:"onbefore",children:["onBefore",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onbefore",children:"#"})]}),"\n",(0,o.jsx)(n.p,{children:"Fun\xe7\xe3o de callback para prepara\xe7\xe3o antes do empacotamento."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Par\xe2metros:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"gez: Gez"})," - Inst\xe2ncia do Gez"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"pkg: Record<string, any>"})," - Conte\xfado do package.json"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Retorno: ",(0,o.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Usos comuns:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Adicionar arquivos adicionais (README, LICENSE, etc.)"}),"\n",(0,o.jsx)(n.li,{children:"Executar testes ou valida\xe7\xf5es de constru\xe7\xe3o"}),"\n",(0,o.jsx)(n.li,{children:"Gerar documenta\xe7\xe3o ou metadados"}),"\n",(0,o.jsx)(n.li,{children:"Limpar arquivos tempor\xe1rios"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Exemplo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onBefore: async (gez, pkg) => {\n  // Adicionar documenta\xe7\xe3o\n  await fs.writeFile('dist/README.md', '# My App');\n  await fs.writeFile('dist/LICENSE', 'MIT License');\n\n  // Executar testes\n  await runTests();\n\n  // Gerar documenta\xe7\xe3o\n  await generateDocs();\n\n  // Limpar arquivos tempor\xe1rios\n  await cleanupTempFiles();\n}\n"})}),"\n",(0,o.jsxs)(n.h4,{id:"onafter",children:["onAfter",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onafter",children:"#"})]}),"\n",(0,o.jsx)(n.p,{children:"Fun\xe7\xe3o de callback para processamento ap\xf3s o empacotamento. Chamada ap\xf3s a gera\xe7\xe3o do arquivo .tgz, usada para processar os artefatos de empacotamento."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Par\xe2metros:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"gez: Gez"})," - Inst\xe2ncia do Gez"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"pkg: Record<string, any>"})," - Conte\xfado do package.json"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"file: Buffer"})," - Conte\xfado do arquivo empacotado"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Retorno: ",(0,o.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Usos comuns:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Publicar no reposit\xf3rio npm (p\xfablico ou privado)"}),"\n",(0,o.jsx)(n.li,{children:"Fazer upload para um servidor de recursos est\xe1ticos"}),"\n",(0,o.jsx)(n.li,{children:"Gerenciar vers\xf5es"}),"\n",(0,o.jsx)(n.li,{children:"Disparar fluxos de CI/CD"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Exemplo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onAfter: async (gez, pkg, file) => {\n  // Publicar no reposit\xf3rio npm privado\n  await publishToRegistry(file, {\n    registry: 'https://registry.example.com'\n  });\n\n  // Fazer upload para o servidor de recursos est\xe1ticos\n  await uploadToServer(file, 'https://assets.example.com/packages');\n\n  // Criar tag de vers\xe3o no Git\n  await createGitTag(pkg.version);\n\n  // Disparar processo de implanta\xe7\xe3o\n  await triggerDeploy(pkg.version);\n}\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"exemplo-de-uso",children:["Exemplo de Uso",(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exemplo-de-uso",children:"#"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n  modules: {\n    // Configurar m\xf3dulos a serem exportados\n    exports: [\n      'root:src/components/button.vue',\n      'root:src/utils/format.ts',\n      'npm:vue',\n      'npm:vue-router'\n    ]\n  },\n  // Configura\xe7\xe3o de empacotamento\n  pack: {\n    // Habilitar funcionalidade de empacotamento\n    enable: true,\n\n    // Gerar m\xfaltiplas vers\xf5es simultaneamente\n    outputs: [\n      'dist/versions/latest.tgz',\n      'dist/versions/1.0.0.tgz'\n    ],\n\n    // Personalizar package.json\n    packageJson: async (gez, pkg) => {\n      pkg.version = '1.0.0';\n      return pkg;\n    },\n\n    // Prepara\xe7\xe3o antes do empacotamento\n    onBefore: async (gez, pkg) => {\n      // Adicionar arquivos necess\xe1rios\n      await fs.writeFile('dist/README.md', '# Your App\\n\\nExplica\xe7\xe3o da exporta\xe7\xe3o de m\xf3dulos...');\n      // Executar verifica\xe7\xe3o de tipos\n      await runTypeCheck();\n    },\n\n    // Processamento ap\xf3s o empacotamento\n    onAfter: async (gez, pkg, file) => {\n      // Publicar no reposit\xf3rio npm privado\n      await publishToRegistry(file, {\n        registry: 'https://npm.your-registry.com/'\n      });\n      // Ou fazer upload para o servidor est\xe1tico\n      await uploadToServer(file, 'https://static.example.com/packages');\n    }\n  }\n} satisfies GezOptions;\n"})})]})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}let d=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["pt%2Fapi%2Fcore%2Fpack-config.md"]={toc:[{text:"Defini\xe7\xe3o de Tipo",id:"defini\xe7\xe3o-de-tipo",depth:2},{text:"PackConfig",id:"packconfig-1",depth:3},{text:"enable",id:"enable",depth:4},{text:"outputs",id:"outputs",depth:4},{text:"packageJson",id:"packagejson",depth:4},{text:"onBefore",id:"onbefore",depth:4},{text:"onAfter",id:"onafter",depth:4},{text:"Exemplo de Uso",id:"exemplo-de-uso",depth:2}],title:"PackConfig",headingTitle:"PackConfig",frontmatter:{titleSuffix:"Refer\xeancia da API de Configura\xe7\xe3o de Empacotamento do Framework Gez",description:"Detalha a interface de configura\xe7\xe3o PackConfig do framework Gez, incluindo regras de empacotamento de pacotes, configura\xe7\xe3o de sa\xedda e ganchos de ciclo de vida, ajudando os desenvolvedores a implementar fluxos de constru\xe7\xe3o padronizados.",head:[["meta",{property:"keywords",content:"Gez, PackConfig, empacotamento de pacotes, configura\xe7\xe3o de constru\xe7\xe3o, ganchos de ciclo de vida, configura\xe7\xe3o de empacotamento, framework de aplica\xe7\xe3o web"}]]}}}}]);