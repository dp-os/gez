"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["2190"],{6306:function(e,n,i){i.r(n),i.d(n,{default:()=>d});var s=i(1549),r=i(6603);function t(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h3:"h3",h4:"h4",ul:"ul",li:"li",strong:"strong",ol:"ol",h2:"h2",code:"code",pre:"pre"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"module-linking",children:["Module Linking",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#module-linking",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The Gez framework provides a comprehensive module linking mechanism for managing code sharing and dependency relationships between services. This mechanism is implemented based on the ESM (ECMAScript Module) specification, supporting source-level module exports and imports, as well as complete dependency management functionality."}),"\n",(0,s.jsxs)(n.h3,{id:"core-concepts",children:["Core Concepts",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#core-concepts",children:"#"})]}),"\n",(0,s.jsxs)(n.h4,{id:"module-export",children:["Module Export",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#module-export",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Module export is the process of exposing specific code units (such as components, utility functions, etc.) from a service in ESM format. It supports two types of exports:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Source Code Export"}),": Directly exports source code files from the project"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dependency Export"}),": Exports third-party dependency packages used by the project"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"module-import",children:["Module Import",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#module-import",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Module import is the process of referencing code units exported by other services within a service. It supports multiple installation methods:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Source Code Installation"}),": Suitable for development environments, supports real-time modifications and hot updates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Package Installation"}),": Suitable for production environments, directly uses build artifacts"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"preloading-mechanism",children:["Preloading Mechanism",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preloading-mechanism",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"To optimize service performance, Gez implements an intelligent module preloading mechanism:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dependency Analysis"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Analyze dependencies between components during build time"}),"\n",(0,s.jsx)(n.li,{children:"Identify core modules on critical paths"}),"\n",(0,s.jsx)(n.li,{children:"Determine module loading priorities"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Loading Strategy"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Immediate Loading"}),": Core modules on critical paths"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lazy Loading"}),": Non-critical functional modules"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"On-demand Loading"}),": Conditionally rendered modules"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resource Optimization"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Intelligent code splitting strategy"}),"\n",(0,s.jsx)(n.li,{children:"Module-level cache management"}),"\n",(0,s.jsx)(n.li,{children:"On-demand compilation and bundling"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"module-export-1",children:["Module Export",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#module-export-1",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"configuration-instructions",children:["Configuration Instructions",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-instructions",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Configure the modules to be exported in ",(0,s.jsx)(n.code,{children:"entry.node.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        exports: [\n            // Export source code files\n            'root:src/components/button.vue',  // Vue component\n            'root:src/utils/format.ts',        // Utility function\n            // Export third-party dependencies\n            'npm:vue',                         // Vue framework\n            'npm:vue-router'                   // Vue Router\n        ]\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Export configuration supports two types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"root:*"}),": Exports source code files, paths relative to the project root directory"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"npm:*"}),": Exports third-party dependencies, directly specifies package names"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"module-import-1",children:["Module Import",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#module-import-1",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"configuration-instructions-1",children:["Configuration Instructions",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-instructions-1",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Configure the modules to be imported in ",(0,s.jsx)(n.code,{children:"entry.node.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        // Import configuration\n        imports: {\n            // Source code installation: points to build artifact directory\n            'ssr-remote': 'root:./node_modules/ssr-remote/dist',\n            // Package installation: points to package directory\n            'other-remote': 'root:./node_modules/other-remote'\n        },\n        // External dependency configuration\n        externals: {\n            // Use dependencies from remote modules\n            'vue': 'ssr-remote/npm/vue',\n            'vue-router': 'ssr-remote/npm/vue-router'\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Configuration item descriptions:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"imports"}),": Configures local paths for remote modules"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Source code installation: Points to build artifact directory (dist)"}),"\n",(0,s.jsx)(n.li,{children:"Package installation: Directly points to package directory"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"externals"}),": Configures external dependencies"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Used for sharing dependencies from remote modules"}),"\n",(0,s.jsx)(n.li,{children:"Avoids duplicate bundling of the same dependencies"}),"\n",(0,s.jsx)(n.li,{children:"Supports multiple modules sharing dependencies"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"installation-methods",children:["Installation Methods",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installation-methods",children:"#"})]}),"\n",(0,s.jsxs)(n.h4,{id:"source-code-installation",children:["Source Code Installation",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#source-code-installation",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Suitable for development environments, supports real-time modifications and hot updates."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Workspace Method"}),"\nRecommended for use in Monorepo projects:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "workspace:*"\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Link Method"}),"\nUsed for local development and debugging:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "link:../ssr-remote"\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.h4,{id:"package-installation",children:["Package Installation",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#package-installation",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Suitable for production environments, directly uses build artifacts."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NPM Registry"}),"\nInstall via npm registry:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "^1.0.0"\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Static Server"}),"\nInstall via HTTP/HTTPS protocol:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "https://cdn.example.com/ssr-remote/1.0.0.tgz"\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"package-building",children:["Package Building",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#package-building",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"configuration-instructions-2",children:["Configuration Instructions",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-instructions-2",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Configure build options in ",(0,s.jsx)(n.code,{children:"entry.node.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    // Module export configuration\n    modules: {\n        exports: [\n            'root:src/components/button.vue',\n            'root:src/utils/format.ts',\n            'npm:vue'\n        ]\n    },\n    // Build configuration\n    pack: {\n        // Enable build\n        enable: true,\n\n        // Output configuration\n        outputs: [\n            'dist/client/versions/latest.tgz',\n            'dist/client/versions/1.0.0.tgz'\n        ],\n\n        // Custom package.json\n        packageJson: async (gez, pkg) => {\n            pkg.version = '1.0.0';\n            return pkg;\n        },\n\n        // Pre-build processing\n        onBefore: async (gez, pkg) => {\n            // Generate type declarations\n            // Execute test cases\n            // Update documentation, etc.\n        },\n\n        // Post-build processing\n        onAfter: async (gez, pkg, file) => {\n            // Upload to CDN\n            // Publish to npm registry\n            // Deploy to test environment, etc.\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"build-artifacts",children:["Build Artifacts",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#build-artifacts",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"your-app-name.tgz\n├── package.json        # Package information\n├── index.js            # Production environment entry\n├── server/             # Server-side resources\n│   └── manifest.json   # Server-side resource mapping\n├── node/               # Node.js runtime\n└── client/             # Client-side resources\n    └── manifest.json   # Client-side resource mapping\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"publishing-process",children:["Publishing Process",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#publishing-process",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 1. Build production version\ngez build\n\n# 2. Publish to npm\nnpm publish dist/versions/your-app-name.tgz\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"best-practices",children:["Best Practices",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#best-practices",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"development-environment-configuration",children:["Development Environment Configuration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#development-environment-configuration",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dependency Management"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use Workspace or Link method for dependency installation"}),"\n",(0,s.jsx)(n.li,{children:"Unified management of dependency versions"}),"\n",(0,s.jsx)(n.li,{children:"Avoid duplicate installation of the same dependencies"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Development Experience"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enable hot update functionality"}),"\n",(0,s.jsx)(n.li,{children:"Configure appropriate preloading strategies"}),"\n",(0,s.jsx)(n.li,{children:"Optimize build speed"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"production-environment-configuration",children:["Production Environment Configuration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#production-environment-configuration",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Deployment Strategy"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use NPM Registry or static server"}),"\n",(0,s.jsx)(n.li,{children:"Ensure build artifact integrity"}),"\n",(0,s.jsx)(n.li,{children:"Implement canary release mechanism"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Performance Optimization"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Properly configure resource preloading"}),"\n",(0,s.jsx)(n.li,{children:"Optimize module loading order"}),"\n",(0,s.jsx)(n.li,{children:"Implement effective caching strategies"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"version-management",children:["Version Management",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#version-management",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Version Specification"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Follow semantic versioning specification"}),"\n",(0,s.jsx)(n.li,{children:"Maintain detailed changelogs"}),"\n",(0,s.jsx)(n.li,{children:"Conduct version compatibility testing"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dependency Updates"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Update dependencies promptly"}),"\n",(0,s.jsx)(n.li,{children:"Conduct regular security audits"}),"\n",(0,s.jsx)(n.li,{children:"Maintain dependency version consistency"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}let d=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["en%2Fguide%2Fessentials%2Fmodule-link.md"]={toc:[{text:"Core Concepts",id:"core-concepts",depth:3},{text:"Module Export",id:"module-export",depth:4},{text:"Module Import",id:"module-import",depth:4},{text:"Preloading Mechanism",id:"preloading-mechanism",depth:3},{text:"Module Export",id:"module-export-1",depth:2},{text:"Configuration Instructions",id:"configuration-instructions",depth:3},{text:"Module Import",id:"module-import-1",depth:2},{text:"Configuration Instructions",id:"configuration-instructions-1",depth:3},{text:"Installation Methods",id:"installation-methods",depth:3},{text:"Source Code Installation",id:"source-code-installation",depth:4},{text:"Package Installation",id:"package-installation",depth:4},{text:"Package Building",id:"package-building",depth:2},{text:"Configuration Instructions",id:"configuration-instructions-2",depth:3},{text:"Build Artifacts",id:"build-artifacts",depth:3},{text:"Publishing Process",id:"publishing-process",depth:3},{text:"Best Practices",id:"best-practices",depth:2},{text:"Development Environment Configuration",id:"development-environment-configuration",depth:3},{text:"Production Environment Configuration",id:"production-environment-configuration",depth:3},{text:"Version Management",id:"version-management",depth:3}],title:"Module Linking",headingTitle:"Module Linking",frontmatter:{titleSuffix:"Gez Framework Inter-Service Code Sharing Mechanism",description:"Detailed introduction to Gez framework's module linking mechanism, including inter-service code sharing, dependency management, and ESM specification implementation, helping developers build efficient micro-frontend applications.",head:[["meta",{property:"keywords",content:"Gez, Module Linking, ESM, Code Sharing, Dependency Management, Micro-frontend"}]]}}}}]);