"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["961"],{3338:function(n,e,s){s.r(e),s.d(e,{default:()=>h});var r=s(1549),i=s(6603);function d(n){let e=Object.assign({h1:"h1",a:"a",p:"p",h3:"h3",h4:"h4",ul:"ul",li:"li",strong:"strong",ol:"ol",h2:"h2",code:"code",pre:"pre"},(0,i.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"связывание-модулей",children:["Связывание модулей",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#связывание-модулей",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"Gez предоставляет полный механизм связывания модулей для управления совместным использованием кода и зависимостями между сервисами. Этот механизм реализован на основе спецификации ESM (ECMAScript Module) и поддерживает экспорт и импорт модулей на уровне исходного кода, а также полное управление зависимостями."}),"\n",(0,r.jsxs)(e.h3,{id:"основные-концепции",children:["Основные концепции",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#основные-концепции",children:"#"})]}),"\n",(0,r.jsxs)(e.h4,{id:"экспорт-модулей",children:["Экспорт модулей",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#экспорт-модулей",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"Экспорт модулей — это процесс предоставления доступа к определенным единицам кода (например, компонентам, утилитам и т.д.) из сервиса в формате ESM. Поддерживаются два типа экспорта:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Экспорт исходного кода"}),": прямое экспортирование файлов исходного кода из проекта"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Экспорт зависимостей"}),": экспортирование сторонних пакетов, используемых в проекте"]}),"\n"]}),"\n",(0,r.jsxs)(e.h4,{id:"импорт-модулей",children:["Импорт модулей",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#импорт-модулей",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"Импорт модулей — это процесс использования единиц кода, экспортированных другими сервисами. Поддерживаются несколько способов установки:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Установка исходного кода"}),": подходит для среды разработки, поддерживает изменения в реальном времени и горячую перезагрузку"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Установка пакетов"}),": подходит для производственной среды, использует готовые сборки"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"механизм-предварительной-загрузки",children:["Механизм предварительной загрузки",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#механизм-предварительной-загрузки",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"Для оптимизации производительности сервисов Gez реализует интеллектуальный механизм предварительной загрузки модулей:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Анализ зависимостей"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Анализ зависимостей между компонентами во время сборки"}),"\n",(0,r.jsx)(e.li,{children:"Идентификация ключевых модулей на критическом пути"}),"\n",(0,r.jsx)(e.li,{children:"Определение приоритета загрузки модулей"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Стратегия загрузки"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Немедленная загрузка"}),": ключевые модули на критическом пути"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Отложенная загрузка"}),": модули неключевых функций"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Загрузка по требованию"}),": модули, отображаемые условно"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Оптимизация ресурсов"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Интеллектуальная стратегия разделения кода"}),"\n",(0,r.jsx)(e.li,{children:"Управление кэшированием на уровне модулей"}),"\n",(0,r.jsx)(e.li,{children:"Компиляция и сборка по требованию"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"экспорт-модулей-1",children:["Экспорт модулей",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#экспорт-модулей-1",children:"#"})]}),"\n",(0,r.jsxs)(e.h3,{id:"настройка",children:["Настройка",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#настройка",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["Настройка экспортируемых модулей в ",(0,r.jsx)(e.code,{children:"entry.node.ts"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        exports: [\n            // Экспорт исходного кода\n            'root:src/components/button.vue',  // Компонент Vue\n            'root:src/utils/format.ts',        // Утилита\n            // Экспорт сторонних зависимостей\n            'npm:vue',                         // Фреймворк Vue\n            'npm:vue-router'                   // Vue Router\n        ]\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,r.jsx)(e.p,{children:"Конфигурация экспорта поддерживает два типа:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"root:*"}),": экспорт файлов исходного кода, путь относительно корня проекта"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"npm:*"}),": экспорт сторонних зависимостей, указывается имя пакета"]}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"импорт-модулей-1",children:["Импорт модулей",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#импорт-модулей-1",children:"#"})]}),"\n",(0,r.jsxs)(e.h3,{id:"настройка-1",children:["Настройка",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#настройка-1",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["Настройка импортируемых модулей в ",(0,r.jsx)(e.code,{children:"entry.node.ts"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        // Конфигурация импорта\n        imports: {\n            // Установка исходного кода: указывает на директорию сборки\n            'ssr-remote': 'root:./node_modules/ssr-remote/dist',\n            // Установка пакетов: указывает на директорию пакета\n            'other-remote': 'root:./node_modules/other-remote'\n        },\n        // Конфигурация внешних зависимостей\n        externals: {\n            // Использование зависимостей из удаленного модуля\n            'vue': 'ssr-remote/npm/vue',\n            'vue-router': 'ssr-remote/npm/vue-router'\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,r.jsx)(e.p,{children:"Описание конфигурации:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"imports"}),": настройка локальных путей для удаленных модулей"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Установка исходного кода: указывает на директорию сборки (dist)"}),"\n",(0,r.jsx)(e.li,{children:"Установка пакетов: указывает на директорию пакета"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"externals"}),": настройка внешних зависимостей"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Для совместного использования зависимостей из удаленных модулей"}),"\n",(0,r.jsx)(e.li,{children:"Избежание дублирования сборки одинаковых зависимостей"}),"\n",(0,r.jsx)(e.li,{children:"Поддержка совместного использования зависимостей несколькими модулями"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"способы-установки",children:["Способы установки",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#способы-установки",children:"#"})]}),"\n",(0,r.jsxs)(e.h4,{id:"установка-исходного-кода",children:["Установка исходного кода",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#установка-исходного-кода",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"Подходит для среды разработки, поддерживает изменения в реальном времени и горячую перезагрузку."}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Workspace"}),"\nРекомендуется для использования в Monorepo:"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "workspace:*"\n    }\n}\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Link"}),"\nДля локальной разработки и отладки:"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "link:../ssr-remote"\n    }\n}\n'})}),"\n",(0,r.jsxs)(e.h4,{id:"установка-пакетов",children:["Установка пакетов",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#установка-пакетов",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"Подходит для производственной среды, использует готовые сборки."}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"NPM Registry"}),"\nУстановка через npm registry:"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "^1.0.0"\n    }\n}\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Статический сервер"}),"\nУстановка через HTTP/HTTPS:"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "https://cdn.example.com/ssr-remote/1.0.0.tgz"\n    }\n}\n'})}),"\n",(0,r.jsxs)(e.h2,{id:"сборка-пакетов",children:["Сборка пакетов",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#сборка-пакетов",children:"#"})]}),"\n",(0,r.jsxs)(e.h3,{id:"настройка-2",children:["Настройка",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#настройка-2",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["Настройка параметров сборки в ",(0,r.jsx)(e.code,{children:"entry.node.ts"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    // Конфигурация экспорта модулей\n    modules: {\n        exports: [\n            'root:src/components/button.vue',\n            'root:src/utils/format.ts',\n            'npm:vue'\n        ]\n    },\n    // Конфигурация сборки\n    pack: {\n        // Включение сборки\n        enable: true,\n\n        // Настройка выходных данных\n        outputs: [\n            'dist/client/versions/latest.tgz',\n            'dist/client/versions/1.0.0.tgz'\n        ],\n\n        // Настройка package.json\n        packageJson: async (gez, pkg) => {\n            pkg.version = '1.0.0';\n            return pkg;\n        },\n\n        // Действия перед сборкой\n        onBefore: async (gez, pkg) => {\n            // Генерация типов\n            // Запуск тестов\n            // Обновление документации и т.д.\n        },\n\n        // Действия после сборки\n        onAfter: async (gez, pkg, file) => {\n            // Загрузка на CDN\n            // Публикация в npm-репозиторий\n            // Развертывание в тестовой среде и т.д.\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"результаты-сборки",children:["Результаты сборки",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#результаты-сборки",children:"#"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"your-app-name.tgz\n├── package.json        # Информация о пакете\n├── index.js            # Точка входа для production\n├── server/             # Ресурсы для сервера\n│   └── manifest.json   # Маппинг ресурсов сервера\n├── node/               # Среда выполнения Node.js\n└── client/             # Ресурсы для клиента\n    └── manifest.json   # Маппинг ресурсов клиента\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"процесс-публикации",children:["Процесс публикации",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#процесс-публикации",children:"#"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# 1. Сборка production-версии\ngez build\n\n# 2. Публикация в npm\nnpm publish dist/versions/your-app-name.tgz\n"})}),"\n",(0,r.jsxs)(e.h2,{id:"лучшие-практики",children:["Лучшие практики",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#лучшие-практики",children:"#"})]}),"\n",(0,r.jsxs)(e.h3,{id:"настройка-среды-разработки",children:["Настройка среды разработки",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#настройка-среды-разработки",children:"#"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Управление зависимостями"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Использование Workspace или Link для установки зависимостей"}),"\n",(0,r.jsx)(e.li,{children:"Унификация версий зависимостей"}),"\n",(0,r.jsx)(e.li,{children:"Избежание дублирования зависимостей"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Опыт разработки"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Включение горячей перезагрузки"}),"\n",(0,r.jsx)(e.li,{children:"Настройка подходящей стратегии предварительной загрузки"}),"\n",(0,r.jsx)(e.li,{children:"Оптимизация скорости сборки"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"настройка-производственной-среды",children:["Настройка производственной среды",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#настройка-производственной-среды",children:"#"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Стратегия развертывания"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Использование NPM Registry или статического сервера"}),"\n",(0,r.jsx)(e.li,{children:"Обеспечение целостности сборки"}),"\n",(0,r.jsx)(e.li,{children:"Внедрение механизма постепенного развертывания"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Оптимизация производительности"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Настройка предварительной загрузки ресурсов"}),"\n",(0,r.jsx)(e.li,{children:"Оптимизация порядка загрузки модулей"}),"\n",(0,r.jsx)(e.li,{children:"Внедрение эффективной стратегии кэширования"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"управление-версиями",children:["Управление версиями",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#управление-версиями",children:"#"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Стандарты версий"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Следование семантическому версионированию"}),"\n",(0,r.jsx)(e.li,{children:"Ведение подробного журнала изменений"}),"\n",(0,r.jsx)(e.li,{children:"Проведение тестов на совместимость версий"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Обновление зависимостей"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Своевременное обновление пакетов"}),"\n",(0,r.jsx)(e.li,{children:"Регулярный аудит безопасности"}),"\n",(0,r.jsx)(e.li,{children:"Поддержание согласованности версий зависимостей"}),"\n"]}),"\n"]}),"\n"]})]})}function l(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}let h=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["ru%2Fguide%2Fessentials%2Fmodule-link.md"]={toc:[{text:"Основные концепции",id:"основные-концепции",depth:3},{text:"Экспорт модулей",id:"экспорт-модулей",depth:4},{text:"Импорт модулей",id:"импорт-модулей",depth:4},{text:"Механизм предварительной загрузки",id:"механизм-предварительной-загрузки",depth:3},{text:"Экспорт модулей",id:"экспорт-модулей-1",depth:2},{text:"Настройка",id:"настройка",depth:3},{text:"Импорт модулей",id:"импорт-модулей-1",depth:2},{text:"Настройка",id:"настройка-1",depth:3},{text:"Способы установки",id:"способы-установки",depth:3},{text:"Установка исходного кода",id:"установка-исходного-кода",depth:4},{text:"Установка пакетов",id:"установка-пакетов",depth:4},{text:"Сборка пакетов",id:"сборка-пакетов",depth:2},{text:"Настройка",id:"настройка-2",depth:3},{text:"Результаты сборки",id:"результаты-сборки",depth:3},{text:"Процесс публикации",id:"процесс-публикации",depth:3},{text:"Лучшие практики",id:"лучшие-практики",depth:2},{text:"Настройка среды разработки",id:"настройка-среды-разработки",depth:3},{text:"Настройка производственной среды",id:"настройка-производственной-среды",depth:3},{text:"Управление версиями",id:"управление-версиями",depth:3}],title:"Связывание модулей",headingTitle:"Связывание модулей",frontmatter:{titleSuffix:"Механизм совместного использования кода между сервисами в Gez",description:"Подробное описание механизма связывания модулей в Gez, включая совместное использование кода между сервисами, управление зависимостями и реализацию спецификации ESM, чтобы помочь разработчикам создавать эффективные микрофронтенд-приложения.",head:[["meta",{property:"keywords",content:"Gez, связывание модулей, Module Link, ESM, совместное использование кода, управление зависимостями, микрофронтенд"}]]}}}}]);