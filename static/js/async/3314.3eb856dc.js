"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["3314"],{8758:function(e,n,r){r.r(n),r.d(n,{default:()=>i});var s=r(1549),a=r(6603);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",strong:"strong",h2:"h2",h3:"h3",pre:"pre",code:"code",h4:"h4"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"rendercontext",children:["RenderContext",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rendercontext",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"RenderContext \xe9 a classe principal do framework Gez, respons\xe1vel por gerenciar o ciclo de vida completo da renderiza\xe7\xe3o no lado do servidor (SSR). Ele fornece um conjunto completo de APIs para lidar com o contexto de renderiza\xe7\xe3o, gerenciamento de recursos, sincroniza\xe7\xe3o de estado e outras tarefas cr\xedticas:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Controle de renderiza\xe7\xe3o"}),": Gerencia o fluxo de renderiza\xe7\xe3o no lado do servidor, suportando cen\xe1rios como renderiza\xe7\xe3o de m\xfaltiplas entradas e renderiza\xe7\xe3o condicional."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gerenciamento de recursos"}),": Coleta e injeta recursos est\xe1ticos como JS, CSS de forma inteligente, otimizando o desempenho de carregamento."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sincroniza\xe7\xe3o de estado"}),": Lida com a serializa\xe7\xe3o do estado no lado do servidor, garantindo a ativa\xe7\xe3o correta no cliente (hydration)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Controle de roteamento"}),": Suporta funcionalidades avan\xe7adas como redirecionamento no lado do servidor e configura\xe7\xe3o de c\xf3digos de status."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"defini\\xe7\\xf5es-de-tipo",children:["Defini\xe7\xf5es de Tipo",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#defini\\xe7\\xf5es-de-tipo",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"serverrenderhandle",children:["ServerRenderHandle",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serverrenderhandle",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Defini\xe7\xe3o de tipo para a fun\xe7\xe3o de manipula\xe7\xe3o de renderiza\xe7\xe3o no lado do servidor."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type ServerRenderHandle = (rc: RenderContext) => Promise<void> | void;\n"})}),"\n",(0,s.jsx)(n.p,{children:"A fun\xe7\xe3o de manipula\xe7\xe3o de renderiza\xe7\xe3o no lado do servidor \xe9 uma fun\xe7\xe3o ass\xedncrona ou s\xedncrona que recebe uma inst\xe2ncia de RenderContext como par\xe2metro, usada para processar a l\xf3gica de renderiza\xe7\xe3o no lado do servidor."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// 1. Fun\xe7\xe3o ass\xedncrona\nexport default async (rc: RenderContext) => {\n  const app = createApp();\n  const html = await renderToString(app);\n  rc.html = html;\n};\n\n// 2. Fun\xe7\xe3o s\xedncrona\nexport const simple = (rc: RenderContext) => {\n  rc.html = '<h1>Hello World</h1>';\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"renderfiles",children:["RenderFiles",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#renderfiles",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Defini\xe7\xe3o de tipo para a lista de arquivos de recursos coletados durante o processo de renderiza\xe7\xe3o."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderFiles {\n  js: string[];\n  css: string[];\n  modulepreload: string[];\n  resources: string[];\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"js"}),": Lista de arquivos JavaScript"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"css"}),": Lista de arquivos de folhas de estilo"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"modulepreload"}),": Lista de m\xf3dulos ESM que precisam ser pr\xe9-carregados"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"resources"}),": Lista de outros arquivos de recursos (imagens, fontes, etc.)"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Exemplo de lista de arquivos de recursos\nrc.files = {\n  js: [\n    '/assets/entry-client.js',\n    '/assets/vendor.js'\n  ],\n  css: [\n    '/assets/main.css',\n    '/assets/vendor.css'\n  ],\n  modulepreload: [\n    '/assets/Home.js',\n    '/assets/About.js'\n  ],\n  resources: [\n    '/assets/logo.png',\n    '/assets/font.woff2'\n  ]\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmapmode",children:["ImportmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Define o modo de gera\xe7\xe3o do importmap."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type ImportmapMode = 'inline' | 'js';\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"inline"}),": Inclui o conte\xfado do importmap diretamente no HTML, adequado para os seguintes cen\xe1rios:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reduzir o n\xfamero de requisi\xe7\xf5es HTTP"}),"\n",(0,s.jsx)(n.li,{children:"Quando o conte\xfado do importmap \xe9 pequeno"}),"\n",(0,s.jsx)(n.li,{children:"Quando o desempenho de carregamento inicial \xe9 cr\xedtico"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"js"}),": Gera o conte\xfado do importmap como um arquivo JS independente, adequado para os seguintes cen\xe1rios:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Quando o conte\xfado do importmap \xe9 grande"}),"\n",(0,s.jsx)(n.li,{children:"Quando \xe9 necess\xe1rio aproveitar o mecanismo de cache do navegador"}),"\n",(0,s.jsx)(n.li,{children:"Quando m\xfaltiplas p\xe1ginas compartilham o mesmo importmap"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Classe de contexto de renderiza\xe7\xe3o, respons\xe1vel pelo gerenciamento de recursos e gera\xe7\xe3o de HTML durante o processo de renderiza\xe7\xe3o no lado do servidor (SSR)."}),"\n",(0,s.jsxs)(n.h2,{id:"op\\xe7\\xf5es-de-inst\\xe2ncia",children:["Op\xe7\xf5es de Inst\xe2ncia",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#op\\xe7\\xf5es-de-inst\\xe2ncia",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Define as op\xe7\xf5es de configura\xe7\xe3o do contexto de renderiza\xe7\xe3o."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderContextOptions {\n  base?: string\n  entryName?: string\n  params?: Record<string, any>\n  importmapMode?: ImportmapMode\n}\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"base",children:["base",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Caminho base para recursos est\xe1ticos."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Todos os recursos est\xe1ticos (JS, CSS, imagens, etc.) ser\xe3o carregados com base neste caminho"}),"\n",(0,s.jsx)(n.li,{children:"Suporta configura\xe7\xe3o din\xe2mica em tempo de execu\xe7\xe3o, sem necessidade de reconstru\xe7\xe3o"}),"\n",(0,s.jsx)(n.li,{children:"Comumente usado em cen\xe1rios como sites multil\xedngues, aplica\xe7\xf5es de micro frontend, etc."}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"entryname",children:["entryName",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Nome da fun\xe7\xe3o de entrada para renderiza\xe7\xe3o no lado do servidor. Usado para especificar a fun\xe7\xe3o de entrada a ser usada durante a renderiza\xe7\xe3o no lado do servidor, quando um m\xf3dulo exporta m\xfaltiplas fun\xe7\xf5es de renderiza\xe7\xe3o."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.server.ts"',children:"export const mobile = async (rc: RenderContext) => {\n  // L\xf3gica de renderiza\xe7\xe3o para dispositivos m\xf3veis\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // L\xf3gica de renderiza\xe7\xe3o para desktop\n};\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"params",children:["params",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Par\xe2metros de renderiza\xe7\xe3o. Permite passar par\xe2metros de qualquer tipo para a fun\xe7\xe3o de renderiza\xe7\xe3o, comumente usado para passar informa\xe7\xf5es de requisi\xe7\xe3o (URL, par\xe2metros de query, etc.)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN',\n    theme: 'dark'\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"importmapmode-1",children:["importmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Modo de gera\xe7\xe3o do mapa de importa\xe7\xe3o (Import Map):"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"inline"}),": Inclui o conte\xfado do importmap diretamente no HTML"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"js"}),": Gera o conte\xfado do importmap como um arquivo JS independente"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"propriedades-da-inst\\xe2ncia",children:["Propriedades da Inst\xe2ncia",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#propriedades-da-inst\\xe2ncia",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"gez",children:["gez",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#gez",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"Gez"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Somente leitura"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Refer\xeancia \xe0 inst\xe2ncia do Gez. Usado para acessar funcionalidades e informa\xe7\xf5es de configura\xe7\xe3o do n\xfacleo do framework."}),"\n",(0,s.jsxs)(n.h3,{id:"redirect",children:["redirect",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#redirect",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"string | null"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Endere\xe7o de redirecionamento. Quando definido, o servidor pode realizar um redirecionamento HTTP com base neste valor, comumente usado em cen\xe1rios como verifica\xe7\xe3o de login, controle de permiss\xf5es, etc."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Exemplo de verifica\xe7\xe3o de login\nexport default async (rc: RenderContext) => {\n  if (!isLoggedIn()) {\n    rc.redirect = '/login';\n    rc.status = 302;\n    return;\n  }\n  // Continuar a renderiza\xe7\xe3o da p\xe1gina...\n};\n\n// Exemplo de controle de permiss\xf5es\nexport default async (rc: RenderContext) => {\n  if (!hasPermission()) {\n    rc.redirect = '/403';\n    rc.status = 403;\n    return;\n  }\n  // Continuar a renderiza\xe7\xe3o da p\xe1gina...\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"status",children:["status",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#status",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"number | null"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"C\xf3digo de status HTTP. Pode ser definido qualquer c\xf3digo de status HTTP v\xe1lido, comumente usado em cen\xe1rios como tratamento de erros, redirecionamentos, etc."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Exemplo de tratamento de erro 404\nexport default async (rc: RenderContext) => {\n  const page = await findPage(rc.params.url);\n  if (!page) {\n    rc.status = 404;\n    // Renderizar p\xe1gina 404...\n    return;\n  }\n  // Continuar a renderiza\xe7\xe3o da p\xe1gina...\n};\n\n// Exemplo de redirecionamento tempor\xe1rio\nexport default async (rc: RenderContext) => {\n  if (needMaintenance()) {\n    rc.redirect = '/maintenance';\n    rc.status = 307; // Redirecionamento tempor\xe1rio, mantendo o m\xe9todo de requisi\xe7\xe3o\n    return;\n  }\n  // Continuar a renderiza\xe7\xe3o da p\xe1gina...\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"html",children:["html",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Conte\xfado HTML. Usado para definir e obter o conte\xfado HTML final gerado, ao definir, trata automaticamente os espa\xe7os reservados para o caminho base."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Uso b\xe1sico\nexport default async (rc: RenderContext) => {\n  // Definir conte\xfado HTML\n  rc.html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        ${rc.preload()}\n        ${rc.css()}\n      </head>\n      <body>\n        <div id=\"app\">Hello World</div>\n        ${rc.importmap()}\n        ${rc.moduleEntry()}\n        ${rc.modulePreload()}\n      </body>\n    </html>\n  `;\n};\n\n// Caminho base din\xe2mico\nconst rc = await gez.render({\n  base: '/app',  // Definir caminho base\n  params: { url: req.url }\n});\n\n// Os espa\xe7os reservados no HTML ser\xe3o substitu\xeddos automaticamente:\n// [[[___GEZ_DYNAMIC_BASE___]]]/your-app-name/css/style.css\n// Substitu\xeddo por:\n// /app/your-app-name/css/style.css\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"base-1",children:["base",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Somente leitura"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Caminho base para recursos est\xe1ticos. Todos os recursos est\xe1ticos (JS, CSS, imagens, etc.) ser\xe3o carregados com base neste caminho, suportando configura\xe7\xe3o din\xe2mica em tempo de execu\xe7\xe3o."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Uso b\xe1sico\nconst rc = await gez.render({\n  base: '/gez',  // Definir caminho base\n  params: { url: req.url }\n});\n\n// Exemplo de site multil\xedngue\nconst rc = await gez.render({\n  base: '/cn',  // Site em chin\xeas\n  params: { lang: 'zh-CN' }\n});\n\n// Exemplo de aplica\xe7\xe3o de micro frontend\nconst rc = await gez.render({\n  base: '/app1',  // Subaplica\xe7\xe3o 1\n  params: { appId: 1 }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"entryname-1",children:["entryName",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Somente leitura"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Nome da fun\xe7\xe3o de entrada para renderiza\xe7\xe3o no lado do servidor. Usado para selecionar a fun\xe7\xe3o de renderiza\xe7\xe3o a ser usada a partir do entry.server.ts."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Fun\xe7\xe3o de entrada padr\xe3o\nexport default async (rc: RenderContext) => {\n  // L\xf3gica de renderiza\xe7\xe3o padr\xe3o\n};\n\n// M\xfaltiplas fun\xe7\xf5es de entrada\nexport const mobile = async (rc: RenderContext) => {\n  // L\xf3gica de renderiza\xe7\xe3o para dispositivos m\xf3veis\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // L\xf3gica de renderiza\xe7\xe3o para desktop\n};\n\n// Selecionar fun\xe7\xe3o de entrada com base no tipo de dispositivo\nconst rc = await gez.render({\n  entryName: isMobile ? 'mobile' : 'desktop',\n  params: { url: req.url }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"params-1",children:["params",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Somente leitura"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Par\xe2metros de renderiza\xe7\xe3o. Permite passar e acessar par\xe2metros durante o processo de renderiza\xe7\xe3o no lado do servidor, comumente usado para passar informa\xe7\xf5es de requisi\xe7\xe3o, configura\xe7\xf5es de p\xe1gina, etc."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Uso b\xe1sico - Passar URL e configura\xe7\xf5es de idioma\nconst rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN'\n  }\n});\n\n// Configura\xe7\xf5es de p\xe1gina - Definir tema e layout\nconst rc = await gez.render({\n  params: {\n    theme: 'dark',\n    layout: 'sidebar'\n  }\n});\n\n// Configura\xe7\xf5es de ambiente - Injetar endere\xe7o da API\nconst rc = await gez.render({\n  params: {\n    apiBaseUrl: process.env.API_BASE_URL,\n    version: '1.0.0'\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmetaset",children:["importMetaSet",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmetaset",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"Set<ImportMeta>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Conjunto de depend\xeancias de m\xf3dulos coletadas. Durante o processo de renderiza\xe7\xe3o de componentes, rastreia e registra automaticamente as depend\xeancias de m\xf3dulos, coletando apenas os recursos realmente usados na renderiza\xe7\xe3o da p\xe1gina atual."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Uso b\xe1sico\nconst renderToString = (app: any, context: { importMetaSet: Set<ImportMeta> }) => {\n  // Coletar automaticamente as depend\xeancias de m\xf3dulos durante o processo de renderiza\xe7\xe3o\n  // O framework chamar\xe1 automaticamente context.importMetaSet.add(import.meta) durante a renderiza\xe7\xe3o de componentes\n  // Desenvolvedores n\xe3o precisam lidar manualmente com a coleta de depend\xeancias\n  return '<div id=\"app\">Hello World</div>';\n};\n\n// Exemplo de uso\nconst app = createApp();\nconst html = await renderToString(app, {\n  importMetaSet: rc.importMetaSet\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"files",children:["files",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#files",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"RenderFiles"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Lista de arquivos de recursos:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"js: Lista de arquivos JavaScript"}),"\n",(0,s.jsx)(n.li,{children:"css: Lista de arquivos de folhas de estilo"}),"\n",(0,s.jsx)(n.li,{children:"modulepreload: Lista de m\xf3dulos ESM que precisam ser pr\xe9-carregados"}),"\n",(0,s.jsx)(n.li,{children:"resources: Lista de outros arquivos de recursos (imagens, fontes, etc.)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Coleta de recursos\nawait rc.commit();\n\n// Inje\xe7\xe3o de recursos\nrc.html = `\n  <!DOCTYPE html>\n  <html>\n  <head>\n    \x3c!-- Pr\xe9-carregar recursos --\x3e\n    ${rc.preload()}\n    \x3c!-- Injetar folhas de estilo --\x3e\n    ${rc.css()}\n  </head>\n  <body>\n    ${html}\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n  </body>\n  </html>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmapmode-2",children:["importmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-2",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo"}),": ",(0,s.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valor padr\xe3o"}),": ",(0,s.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Modo de gera\xe7\xe3o do mapa de importa\xe7\xe3o:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"inline"}),": Inclui o conte\xfado do importmap diretamente no HTML"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"js"}),": Gera o conte\xfado do importmap como um arquivo JS independente"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"m\\xe9todos-da-inst\\xe2ncia",children:["M\xe9todos da Inst\xe2ncia",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#m\\xe9todos-da-inst\\xe2ncia",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"serialize",children:["serialize()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serialize",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Par\xe2metros"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"input: any"})," - Dados a serem serializados"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options?: serialize.SerializeJSOptions"})," - Op\xe7\xf5es de serializa\xe7\xe3o"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retorno"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Serializa um objeto JavaScript em uma string. Usado para serializar dados de estado durante o processo de renderiza\xe7\xe3o no lado do servidor, garantindo que os dados possam ser embutidos com seguran\xe7a no HTML."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const state = {\n  user: { id: 1, name: 'Alice' },\n  timestamp: new Date()\n};\n\nrc.html = `\n  <script>\n    window.__INITIAL_STATE__ = ${rc.serialize(state)};\n  <\/script>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"state",children:["state()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#state",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Par\xe2metros"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"varName: string"})," - Nome da vari\xe1vel"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data: Record<string, any>"})," - Dados de estado"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retorno"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Serializa e injeta dados de estado no HTML. Usa m\xe9todos de serializa\xe7\xe3o seguros para processar dados, suportando estruturas de dados complexas."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const userInfo = {\n  id: 1,\n  name: 'John',\n  roles: ['admin']\n};\n\nrc.html = `\n  <head>\n    ${rc.state('__USER__', userInfo)}\n  </head>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"commit",children:["commit()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#commit",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retorno"}),": ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Submete a coleta de depend\xeancias e atualiza a lista de recursos. Coleta todos os m\xf3dulos usados a partir do importMetaSet, analisando os recursos espec\xedficos de cada m\xf3dulo com base no arquivo de manifesto."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Renderizar e submeter depend\xeancias\nconst html = await renderToString(app, {\n  importMetaSet: rc.importMetaSet\n});\n\n// Submeter coleta de depend\xeancias\nawait rc.commit();\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"preload",children:["preload()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preload",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retorno"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Gera tags de pr\xe9-carregamento de recursos. Usado para pr\xe9-carregar recursos CSS e JavaScript, suportando configura\xe7\xe3o de prioridade, tratando automaticamente o caminho base."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"rc.html = `\n  <!DOCTYPE html>\n  <html>\n  <head>\n    ${rc.preload()}\n    ${rc.css()}  \x3c!-- Injetar folhas de estilo --\x3e\n  </head>\n  <body>\n    ${html}\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n  </body>\n  </html>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"css",children:["css()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#css",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retorno"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Gera tags de folhas de estilo CSS. Injeta os arquivos CSS coletados, garantindo que as folhas de estilo sejam carregadas na ordem correta."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"rc.html = `\n  <head>\n    ${rc.css()}  \x3c!-- Injetar todas as folhas de estilo coletadas --\x3e\n  </head>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmap",children:["importmap()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmap",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retorno"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Gera tags de mapa de importa\xe7\xe3o. Gera o mapa de importa\xe7\xe3o inline ou externo com base na configura\xe7\xe3o do importmapMode."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"rc.html = `\n  <head>\n    ${rc.importmap()}  \x3c!-- Injetar mapa\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}let i=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["pt%2Fapi%2Fcore%2Frender-context.md"]={toc:[{text:"Defini\xe7\xf5es de Tipo",id:"defini\xe7\xf5es-de-tipo",depth:2},{text:"ServerRenderHandle",id:"serverrenderhandle",depth:3},{text:"RenderFiles",id:"renderfiles",depth:3},{text:"ImportmapMode",id:"importmapmode",depth:3},{text:"Op\xe7\xf5es de Inst\xe2ncia",id:"op\xe7\xf5es-de-inst\xe2ncia",depth:2},{text:"base",id:"base",depth:4},{text:"entryName",id:"entryname",depth:4},{text:"params",id:"params",depth:4},{text:"importmapMode",id:"importmapmode-1",depth:4},{text:"Propriedades da Inst\xe2ncia",id:"propriedades-da-inst\xe2ncia",depth:2},{text:"gez",id:"gez",depth:3},{text:"redirect",id:"redirect",depth:3},{text:"status",id:"status",depth:3},{text:"html",id:"html",depth:3},{text:"base",id:"base-1",depth:3},{text:"entryName",id:"entryname-1",depth:3},{text:"params",id:"params-1",depth:3},{text:"importMetaSet",id:"importmetaset",depth:3},{text:"files",id:"files",depth:3},{text:"importmapMode",id:"importmapmode-2",depth:3},{text:"M\xe9todos da Inst\xe2ncia",id:"m\xe9todos-da-inst\xe2ncia",depth:2},{text:"serialize()",id:"serialize",depth:3},{text:"state()",id:"state",depth:3},{text:"commit()",id:"commit",depth:3},{text:"preload()",id:"preload",depth:3},{text:"css()",id:"css",depth:3},{text:"importmap()",id:"importmap",depth:3}],title:"RenderContext",headingTitle:"RenderContext",frontmatter:{titleSuffix:"Refer\xeancia da API de Contexto de Renderiza\xe7\xe3o do Framework Gez",description:"Detalhes sobre a classe principal RenderContext do framework Gez, incluindo controle de renderiza\xe7\xe3o, gerenciamento de recursos, sincroniza\xe7\xe3o de estado e controle de roteamento, ajudando desenvolvedores a implementar renderiza\xe7\xe3o no lado do servidor (SSR) de forma eficiente.",head:[["meta",{property:"keywords",content:"Gez, RenderContext, SSR, Renderiza\xe7\xe3o no lado do servidor, Contexto de renderiza\xe7\xe3o, Sincroniza\xe7\xe3o de estado, Gerenciamento de recursos, Framework de aplica\xe7\xe3o web"}]]}}}}]);