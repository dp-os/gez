"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["3057"],{2915:function(e,n,i){i.r(n),i.d(n,{default:()=>s});var r=i(1549),t=i(6603);function a(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3",ol:"ol",li:"li"},(0,t.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"html",children:["HTML",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Questo tutorial ti guider\xe0 nella creazione di un'applicazione HTML SSR basata su Gez da zero. Attraverso un esempio completo, dimostreremo come utilizzare il framework Gez per creare un'applicazione con rendering lato server."}),"\n",(0,r.jsxs)(n.h2,{id:"struttura-del-progetto",children:["Struttura del progetto",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#struttura-del-progetto",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Iniziamo comprendendo la struttura di base del progetto:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:".\n├── package.json         # File di configurazione del progetto, definisce le dipendenze e i comandi di script\n├── tsconfig.json        # File di configurazione TypeScript, imposta le opzioni di compilazione\n└── src                  # Directory del codice sorgente\n    ├── app.ts           # Componente principale dell'applicazione, definisce la struttura della pagina e la logica di interazione\n    ├── create-app.ts    # Factory per la creazione dell'istanza dell'applicazione, responsabile dell'inizializzazione dell'app\n    ├── entry.client.ts  # File di ingresso lato client, gestisce il rendering nel browser\n    ├── entry.node.ts    # File di ingresso del server Node.js, responsabile della configurazione dell'ambiente di sviluppo e dell'avvio del server\n    └── entry.server.ts  # File di ingresso lato server, gestisce la logica di rendering SSR\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"configurazione-del-progetto",children:["Configurazione del progetto",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configurazione-del-progetto",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"packagejson",children:["package.json",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#packagejson",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Crea il file ",(0,r.jsx)(n.code,{children:"package.json"})," per configurare le dipendenze e gli script del progetto:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "name": "ssr-demo-html",\n  "version": "1.0.0",\n  "type": "module",\n  "private": true,\n  "scripts": {\n    "dev": "gez dev",\n    "build": "npm run build:dts && npm run build:ssr",\n    "build:ssr": "gez build",\n    "preview": "gez preview",\n    "start": "NODE_ENV=production node dist/index.js",\n    "build:dts": "tsc --declaration --emitDeclarationOnly --outDir dist/src"\n  },\n  "dependencies": {\n    "@gez/core": "*"\n  },\n  "devDependencies": {\n    "@gez/rspack": "*",\n    "@types/node": "22.8.6",\n    "typescript": "^5.7.3"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Dopo aver creato il file ",(0,r.jsx)(n.code,{children:"package.json"}),", \xe8 necessario installare le dipendenze del progetto. Puoi utilizzare uno dei seguenti comandi per l'installazione:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm install\n# oppure\nyarn install\n# oppure\nnpm install\n"})}),"\n",(0,r.jsx)(n.p,{children:"Questo installer\xe0 tutti i pacchetti necessari, inclusi TypeScript e le dipendenze relative a SSR."}),"\n",(0,r.jsxs)(n.h3,{id:"tsconfigjson",children:["tsconfig.json",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#tsconfigjson",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Crea il file ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," per configurare le opzioni di compilazione TypeScript:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",meta:'title="tsconfig.json"',children:'{\n    "compilerOptions": {\n        "module": "ESNext",\n        "moduleResolution": "node",\n        "isolatedModules": true,\n        "resolveJsonModule": true,\n        \n        "target": "ESNext",\n        "lib": ["ESNext", "DOM"],\n        \n        "strict": true,\n        "skipLibCheck": true,\n        "types": ["@types/node"],\n        \n        "experimentalDecorators": true,\n        "allowSyntheticDefaultImports": true,\n        \n        "baseUrl": ".",\n        "paths": {\n            "ssr-demo-html/src/*": ["./src/*"],\n            "ssr-demo-html/*": ["./*"]\n        }\n    },\n    "include": ["src"],\n    "exclude": ["dist", "node_modules"]\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"struttura-del-codice-sorgente",children:["Struttura del codice sorgente",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#struttura-del-codice-sorgente",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"appts",children:["app.ts",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#appts",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Crea il componente principale dell'applicazione ",(0,r.jsx)(n.code,{children:"src/app.ts"}),", implementando la struttura della pagina e la logica di interazione:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/app.ts"',children:"/**\n * @file Componente di esempio\n * @description Mostra un titolo di pagina con un tempo aggiornato automaticamente, per dimostrare le funzionalit\xe0 di base del framework Gez\n */\n\nexport default class App {\n    /**\n     * Tempo corrente, in formato ISO\n     * @type {string}\n     */\n    public time = '';\n\n    /**\n     * Crea un'istanza dell'applicazione\n     * @param {SsrContext} [ssrContext] - Contesto lato server, contiene una raccolta di metadati di importazione\n     */\n    public constructor(public ssrContext?: SsrContext) {\n        // Non \xe8 necessaria alcuna inizializzazione aggiuntiva nel costruttore\n    }\n\n    /**\n     * Renderizza il contenuto della pagina\n     * @returns {string} Restituisce la struttura HTML della pagina\n     */\n    public render(): string {\n        // Assicura che i metadati di importazione vengano raccolti correttamente in ambiente server\n        if (this.ssrContext) {\n            this.ssrContext.importMetaSet.add(import.meta);\n        }\n\n        return `\n        <div id=\"app\">\n            <h1><a href=\"https://www.jsesm.com/guide/frameworks/html.html\" target=\"_blank\">Guida rapida a Gez</a></h1>\n            <time datetime=\"${this.time}\">${this.time}</time>\n        </div>\n        `;\n    }\n\n    /**\n     * Inizializzazione lato client\n     * @throws {Error} Lancia un errore se non trova l'elemento di visualizzazione del tempo\n     */\n    public onClient(): void {\n        // Ottiene l'elemento di visualizzazione del tempo\n        const time = document.querySelector('#app time');\n        if (!time) {\n            throw new Error('Elemento di visualizzazione del tempo non trovato');\n        }\n\n        // Imposta un timer per aggiornare il tempo ogni secondo\n        setInterval(() => {\n            this.time = new Date().toISOString();\n            time.setAttribute('datetime', this.time);\n            time.textContent = this.time;\n        }, 1000);\n    }\n\n    /**\n     * Inizializzazione lato server\n     */\n    public onServer(): void {\n        this.time = new Date().toISOString();\n    }\n}\n\n/**\n * Interfaccia del contesto lato server\n * @interface\n */\nexport interface SsrContext {\n    /**\n     * Raccolta di metadati di importazione\n     * @type {Set<ImportMeta>}\n     */\n    importMetaSet: Set<ImportMeta>;\n}\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"create-appts",children:["create-app.ts",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#create-appts",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Crea il file ",(0,r.jsx)(n.code,{children:"src/create-app.ts"}),", responsabile della creazione dell'istanza dell'applicazione:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/create-app.ts"',children:"/**\n * @file Creazione dell'istanza dell'applicazione\n * @description Responsabile della creazione e configurazione dell'istanza dell'applicazione\n */\n\nimport App from './app';\n\nexport function createApp() {\n    const app = new App();\n    return {\n        app\n    };\n}\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"entryclientts",children:["entry.client.ts",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryclientts",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Crea il file di ingresso lato client ",(0,r.jsx)(n.code,{children:"src/entry.client.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.client.ts"',children:"/**\n * @file File di ingresso lato client\n * @description Responsabile della logica di interazione e aggiornamento dinamico lato client\n */\n\nimport { createApp } from './create-app';\n\n// Crea un'istanza dell'applicazione e la inizializza\nconst { app } = createApp();\napp.onClient();\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"entrynodets",children:["entry.node.ts",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entrynodets",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Crea il file ",(0,r.jsx)(n.code,{children:"entry.node.ts"}),", responsabile della configurazione dell'ambiente di sviluppo e dell'avvio del server:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"/**\n * @file File di ingresso del server Node.js\n * @description Responsabile della configurazione dell'ambiente di sviluppo e dell'avvio del server, fornendo un ambiente di runtime per SSR\n */\n\nimport http from 'node:http';\nimport type { GezOptions } from '@gez/core';\n\nexport default {\n    /**\n     * Configura il creatore dell'applicazione per l'ambiente di sviluppo\n     * @description Crea e configura un'istanza dell'applicazione Rspack, utilizzata per la costruzione e l'aggiornamento in tempo reale nell'ambiente di sviluppo\n     * @param gez Istanza del framework Gez, fornisce funzionalit\xe0 di base e interfacce di configurazione\n     * @returns Restituisce un'istanza configurata dell'applicazione Rspack, supporta HMR e anteprima in tempo reale\n     */\n    async devApp(gez) {\n        return import('@gez/rspack').then((m) =>\n            m.createRspackHtmlApp(gez, {\n                config(context) {\n                    // Personalizza qui la configurazione di compilazione Rspack\n                }\n            })\n        );\n    },\n\n    /**\n     * Configura e avvia il server HTTP\n     * @description Crea un'istanza del server HTTP, integra il middleware Gez e gestisce le richieste SSR\n     * @param gez Istanza del framework Gez, fornisce funzionalit\xe0 di middleware e rendering\n     */\n    async server(gez) {\n        const server = http.createServer((req, res) => {\n            // Utilizza il middleware Gez per gestire le richieste\n            gez.middleware(req, res, async () => {\n                // Esegue il rendering lato server\n                const rc = await gez.render({\n                    params: { url: req.url }\n                });\n                res.end(rc.html);\n            });\n        });\n\n        server.listen(3000, () => {\n            console.log('Server avviato: http://localhost:3000');\n        });\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Questo file \xe8 il punto di ingresso per la configurazione dell'ambiente di sviluppo e l'avvio del server, contenente due funzionalit\xe0 principali:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Funzione ",(0,r.jsx)(n.code,{children:"devApp"}),": responsabile della creazione e configurazione dell'istanza dell'applicazione Rspack per l'ambiente di sviluppo, supportando l'aggiornamento in tempo reale e l'anteprima."]}),"\n",(0,r.jsxs)(n.li,{children:["Funzione ",(0,r.jsx)(n.code,{children:"server"}),": responsabile della creazione e configurazione del server HTTP, integrando il middleware Gez per gestire le richieste SSR."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"entryserverts",children:["entry.server.ts",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryserverts",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Crea il file di ingresso per il rendering lato server ",(0,r.jsx)(n.code,{children:"src/entry.server.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.server.ts"',children:"/**\n * @file File di ingresso per il rendering lato server\n * @description Responsabile del flusso di rendering lato server, generazione HTML e iniezione delle risorse\n */\n\nimport type { RenderContext } from '@gez/core';\nimport type App from './app';\nimport type { SsrContext } from './app';\nimport { createApp } from './create-app';\n\n// Incapsula la logica di generazione del contenuto della pagina\nconst renderToString = (app: App, ssrContext: SsrContext): string => {\n    // Inietta il contesto di rendering lato server nell'istanza dell'applicazione\n    app.ssrContext = ssrContext;\n    // Inizializza il lato server\n    app.onServer();\n\n    // Genera il contenuto della pagina\n    return app.render();\n};\n\nexport default async (rc: RenderContext) => {\n    // Crea un'istanza dell'applicazione, restituisce un oggetto contenente l'istanza app\n    const { app } = createApp();\n    // Utilizza renderToString per generare il contenuto della pagina\n    const html = renderToString(app, {\n        importMetaSet: rc.importMetaSet\n    });\n\n    // Conferma la raccolta delle dipendenze, assicurando che tutte le risorse necessarie vengano caricate\n    await rc.commit();\n\n    // Genera la struttura HTML completa\n    rc.html = `<!DOCTYPE html>\n<html lang=\"it\">\n<head>\n    ${rc.preload()}\n    <title>Guida rapida a Gez</title>\n    ${rc.css()}\n</head>\n<body>\n    ${html}\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n</body>\n</html>\n`;\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"esecuzione-del-progetto",children:["Esecuzione del progetto",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#esecuzione-del-progetto",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Dopo aver completato la configurazione dei file, puoi utilizzare i seguenti comandi per eseguire il progetto:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Modalit\xe0 di sviluppo:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Costruzione del progetto:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Esecuzione in ambiente di produzione:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run start\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ora hai creato con successo un'applicazione HTML SSR basata su Gez! Visita ",(0,r.jsx)(n.a,{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer",children:"http://localhost:3000"})," per vedere il risultato."]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}let s=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["it%2Fguide%2Fframeworks%2Fhtml.md"]={toc:[{text:"Struttura del progetto",id:"struttura-del-progetto",depth:2},{text:"Configurazione del progetto",id:"configurazione-del-progetto",depth:2},{text:"package.json",id:"packagejson",depth:3},{text:"tsconfig.json",id:"tsconfigjson",depth:3},{text:"Struttura del codice sorgente",id:"struttura-del-codice-sorgente",depth:2},{text:"app.ts",id:"appts",depth:3},{text:"create-app.ts",id:"create-appts",depth:3},{text:"entry.client.ts",id:"entryclientts",depth:3},{text:"entry.node.ts",id:"entrynodets",depth:3},{text:"entry.server.ts",id:"entryserverts",depth:3},{text:"Esecuzione del progetto",id:"esecuzione-del-progetto",depth:2}],title:"HTML",headingTitle:"HTML",frontmatter:{titleSuffix:"Esempio di applicazione HTML SSR con il framework Gez",description:"Costruisci da zero un'applicazione HTML SSR basata su Gez, dimostrando l'uso di base del framework attraverso un esempio pratico, inclusa l'inizializzazione del progetto, la configurazione HTML e l'impostazione dei file di ingresso.",head:[["meta",{property:"keywords",content:"Gez, HTML, Applicazione SSR, Configurazione TypeScript, Inizializzazione progetto, Rendering lato server, Interazione lato client"}]]}}}}]);