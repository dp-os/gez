"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["9894"],{7765:function(e,n,i){i.r(n),i.d(n,{default:()=>o});var s=i(1549),r=i(6603);function a(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",ul:"ul",li:"li",strong:"strong",h2:"h2",pre:"pre",h3:"h3",h4:"h4"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"packconfig",children:["PackConfig",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"PackConfig"})," est une interface de configuration de packaging de paquets, utilis\xe9e pour empaqueter les artefacts de construction d'un service dans un format de paquet npm standard .tgz."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Standardisation"})," : Utilisation du format de packaging .tgz standard de npm"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Int\xe9grit\xe9"})," : Inclut tous les fichiers n\xe9cessaires tels que le code source du module, les d\xe9clarations de types et les fichiers de configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Compatibilit\xe9"})," : Compl\xe8tement compatible avec l'\xe9cosyst\xe8me npm, supporte les workflows standard de gestion de paquets"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"d\\xe9finition-de-type",children:["D\xe9finition de type",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#d\\xe9finition-de-type",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface PackConfig {\n    enable?: boolean;\n    outputs?: string | string[] | boolean;\n    packageJson?: (gez: Gez, pkg: Record<string, any>) => Promise<Record<string, any>>;\n    onBefore?: (gez: Gez, pkg: Record<string, any>) => Promise<void>;\n    onAfter?: (gez: Gez, pkg: Record<string, any>, file: Buffer) => Promise<void>;\n}\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"packconfig-1",children:["PackConfig",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig-1",children:"#"})]}),"\n",(0,s.jsxs)(n.h4,{id:"enable",children:["enable",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enable",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Active ou d\xe9sactive la fonctionnalit\xe9 de packaging. Lorsqu'elle est activ\xe9e, les artefacts de construction sont empaquet\xe9s dans un format de paquet npm standard .tgz."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Type : ",(0,s.jsx)(n.code,{children:"boolean"})]}),"\n",(0,s.jsxs)(n.li,{children:["Valeur par d\xe9faut : ",(0,s.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"outputs",children:["outputs",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputs",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Sp\xe9cifie le chemin de sortie du fichier de paquet. Supporte les configurations suivantes :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"string"})," : Un seul chemin de sortie, par exemple 'dist/versions/my-app.tgz'"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"string[]"})," : Plusieurs chemins de sortie, pour g\xe9n\xe9rer plusieurs versions simultan\xe9ment"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"boolean"})," : true pour utiliser le chemin par d\xe9faut 'dist/client/versions/latest.tgz'"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"packagejson",children:["packageJson",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#packagejson",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Fonction de rappel pour personnaliser le contenu de package.json. Appel\xe9e avant le packaging pour personnaliser le contenu de package.json."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Param\xe8tres :","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gez: Gez"})," - Instance de Gez"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pkg: any"})," - Contenu original de package.json"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Valeur de retour : ",(0,s.jsx)(n.code,{children:"Promise<any>"})," - Contenu modifi\xe9 de package.json"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Utilisations courantes :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Modifier le nom et la version du paquet"}),"\n",(0,s.jsx)(n.li,{children:"Ajouter ou mettre \xe0 jour des d\xe9pendances"}),"\n",(0,s.jsx)(n.li,{children:"Ajouter des champs personnalis\xe9s"}),"\n",(0,s.jsx)(n.li,{children:"Configurer les informations de publication"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Exemple :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"packageJson: async (gez, pkg) => {\n  // D\xe9finir les informations du paquet\n  pkg.name = 'my-app';\n  pkg.version = '1.0.0';\n  pkg.description = 'Mon application';\n\n  // Ajouter des d\xe9pendances\n  pkg.dependencies = {\n    'vue': '^3.0.0',\n    'express': '^4.17.1'\n  };\n\n  // Ajouter la configuration de publication\n  pkg.publishConfig = {\n    registry: 'https://registry.example.com'\n  };\n\n  return pkg;\n}\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"onbefore",children:["onBefore",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onbefore",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Fonction de rappel pour les pr\xe9paratifs avant le packaging."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Param\xe8tres :","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gez: Gez"})," - Instance de Gez"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pkg: Record<string, any>"})," - Contenu de package.json"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Valeur de retour : ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Utilisations courantes :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ajouter des fichiers suppl\xe9mentaires (README, LICENSE, etc.)"}),"\n",(0,s.jsx)(n.li,{children:"Ex\xe9cuter des tests ou des validations de construction"}),"\n",(0,s.jsx)(n.li,{children:"G\xe9n\xe9rer de la documentation ou des m\xe9tadonn\xe9es"}),"\n",(0,s.jsx)(n.li,{children:"Nettoyer les fichiers temporaires"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Exemple :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"onBefore: async (gez, pkg) => {\n  // Ajouter de la documentation\n  await fs.writeFile('dist/README.md', '# Mon application');\n  await fs.writeFile('dist/LICENSE', 'Licence MIT');\n\n  // Ex\xe9cuter des tests\n  await runTests();\n\n  // G\xe9n\xe9rer de la documentation\n  await generateDocs();\n\n  // Nettoyer les fichiers temporaires\n  await cleanupTempFiles();\n}\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"onafter",children:["onAfter",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#onafter",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Fonction de rappel pour le traitement apr\xe8s le packaging. Appel\xe9e apr\xe8s la g\xe9n\xe9ration du fichier .tgz, pour traiter les artefacts de packaging."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Param\xe8tres :","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gez: Gez"})," - Instance de Gez"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pkg: Record<string, any>"})," - Contenu de package.json"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"file: Buffer"})," - Contenu du fichier empaquet\xe9"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Valeur de retour : ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Utilisations courantes :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Publier sur un registre npm (public ou priv\xe9)"}),"\n",(0,s.jsx)(n.li,{children:"T\xe9l\xe9verser sur un serveur de ressources statiques"}),"\n",(0,s.jsx)(n.li,{children:"G\xe9rer les versions"}),"\n",(0,s.jsx)(n.li,{children:"D\xe9clencher des processus CI/CD"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Exemple :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"onAfter: async (gez, pkg, file) => {\n  // Publier sur un registre npm priv\xe9\n  await publishToRegistry(file, {\n    registry: 'https://registry.example.com'\n  });\n\n  // T\xe9l\xe9verser sur un serveur de ressources statiques\n  await uploadToServer(file, 'https://assets.example.com/packages');\n\n  // Cr\xe9er un tag de version\n  await createGitTag(pkg.version);\n\n  // D\xe9clencher le processus de d\xe9ploiement\n  await triggerDeploy(pkg.version);\n}\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"exemple-dutilisation",children:["Exemple d'utilisation",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exemple-dutilisation",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n  modules: {\n    // Configurer les modules \xe0 exporter\n    exports: [\n      'root:src/components/button.vue',\n      'root:src/utils/format.ts',\n      'npm:vue',\n      'npm:vue-router'\n    ]\n  },\n  // Configuration de packaging\n  pack: {\n    // Activer la fonctionnalit\xe9 de packaging\n    enable: true,\n\n    // Sortir plusieurs versions simultan\xe9ment\n    outputs: [\n      'dist/versions/latest.tgz',\n      'dist/versions/1.0.0.tgz'\n    ],\n\n    // Personnaliser package.json\n    packageJson: async (gez, pkg) => {\n      pkg.version = '1.0.0';\n      return pkg;\n    },\n\n    // Pr\xe9paratifs avant le packaging\n    onBefore: async (gez, pkg) => {\n      // Ajouter des fichiers n\xe9cessaires\n      await fs.writeFile('dist/README.md', '# Votre application\\n\\nDescription des modules export\xe9s...');\n      // Ex\xe9cuter une v\xe9rification de type\n      await runTypeCheck();\n    },\n\n    // Traitement apr\xe8s le packaging\n    onAfter: async (gez, pkg, file) => {\n      // Publier sur un registre npm priv\xe9\n      await publishToRegistry(file, {\n        registry: 'https://npm.your-registry.com/'\n      });\n      // Ou d\xe9ployer sur un serveur statique\n      await uploadToServer(file, 'https://static.example.com/packages');\n    }\n  }\n} satisfies GezOptions;\n"})})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}let o=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["fr%2Fapi%2Fcore%2Fpack-config.md"]={toc:[{text:"D\xe9finition de type",id:"d\xe9finition-de-type",depth:2},{text:"PackConfig",id:"packconfig-1",depth:3},{text:"enable",id:"enable",depth:4},{text:"outputs",id:"outputs",depth:4},{text:"packageJson",id:"packagejson",depth:4},{text:"onBefore",id:"onbefore",depth:4},{text:"onAfter",id:"onafter",depth:4},{text:"Exemple d'utilisation",id:"exemple-dutilisation",depth:2}],title:"PackConfig",headingTitle:"PackConfig",frontmatter:{titleSuffix:"R\xe9f\xe9rence de l'API de configuration de packaging du framework Gez",description:"Documentation d\xe9taill\xe9e de l'interface de configuration PackConfig du framework Gez, incluant les r\xe8gles de packaging des paquets, la configuration de sortie et les hooks de cycle de vie, pour aider les d\xe9veloppeurs \xe0 mettre en œuvre des processus de construction standardis\xe9s.",head:[["meta",{property:"keywords",content:"Gez, PackConfig, packaging de paquets, configuration de build, hooks de cycle de vie, configuration de packaging, framework d'application Web"}]]}}}}]);