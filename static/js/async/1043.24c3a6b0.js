"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["1043"],{8718:function(n,e,i){i.r(e),i.d(e,{default:()=>t});var h=i(1549),c=i(6603);function s(n){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",ul:"ul",li:"li",strong:"strong",h2:"h2",pre:"pre",h3:"h3",h4:"h4"},(0,c.ah)(),n.components);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(e.h1,{id:"packconfig",children:["PackConfig",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig",children:"#"})]}),"\n",(0,h.jsxs)(e.p,{children:[(0,h.jsx)(e.code,{children:"PackConfig"})," l\xe0 giao diện cấu h\xecnh đ\xf3ng g\xf3i g\xf3i phần mềm, được sử dụng để đ\xf3ng g\xf3i c\xe1c sản phẩm x\xe2y dựng của dịch vụ th\xe0nh g\xf3i phần mềm định dạng .tgz ti\xeau chuẩn của npm."]}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"Ti\xeau chuẩn h\xf3a"}),": Sử dụng định dạng đ\xf3ng g\xf3i .tgz ti\xeau chuẩn của npm"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"T\xednh to\xe0n vẹn"}),": Bao gồm m\xe3 nguồn, khai b\xe1o kiểu v\xe0 c\xe1c tệp cấu h\xecnh cần thiết kh\xe1c của m\xf4-đun"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.strong,{children:"T\xednh tương th\xedch"}),": Ho\xe0n to\xe0n tương th\xedch với hệ sinh th\xe1i npm, hỗ trợ quy tr\xecnh l\xe0m việc quản l\xfd g\xf3i ti\xeau chuẩn"]}),"\n"]}),"\n",(0,h.jsxs)(e.h2,{id:"định-nghĩa-kiểu",children:["Định nghĩa kiểu",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#định-nghĩa-kiểu",children:"#"})]}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-ts",children:"interface PackConfig {\n    enable?: boolean;\n    outputs?: string | string[] | boolean;\n    packageJson?: (gez: Gez, pkg: Record<string, any>) => Promise<Record<string, any>>;\n    onBefore?: (gez: Gez, pkg: Record<string, any>) => Promise<void>;\n    onAfter?: (gez: Gez, pkg: Record<string, any>, file: Buffer) => Promise<void>;\n}\n"})}),"\n",(0,h.jsxs)(e.h3,{id:"packconfig-1",children:["PackConfig",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig-1",children:"#"})]}),"\n",(0,h.jsxs)(e.h4,{id:"enable",children:["enable",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#enable",children:"#"})]}),"\n",(0,h.jsx)(e.p,{children:"C\xf3 k\xedch hoạt chức năng đ\xf3ng g\xf3i hay kh\xf4ng. Khi được k\xedch hoạt, c\xe1c sản phẩm x\xe2y dựng sẽ được đ\xf3ng g\xf3i th\xe0nh g\xf3i phần mềm định dạng .tgz ti\xeau chuẩn của npm."}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:["Kiểu: ",(0,h.jsx)(e.code,{children:"boolean"})]}),"\n",(0,h.jsxs)(e.li,{children:["Gi\xe1 trị mặc định: ",(0,h.jsx)(e.code,{children:"false"})]}),"\n"]}),"\n",(0,h.jsxs)(e.h4,{id:"outputs",children:["outputs",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#outputs",children:"#"})]}),"\n",(0,h.jsx)(e.p,{children:"Chỉ định đường dẫn tệp g\xf3i phần mềm đầu ra. Hỗ trợ c\xe1c c\xe1ch cấu h\xecnh sau:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"string"}),": Một đường dẫn đầu ra duy nhất, v\xed dụ: 'dist/versions/my-app.tgz'"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"string[]"}),": Nhiều đường dẫn đầu ra, d\xf9ng để tạo nhiều phi\xean bản c\xf9ng l\xfac"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"boolean"}),": Khi l\xe0 true, sử dụng đường dẫn mặc định 'dist/client/versions/latest.tgz'"]}),"\n"]}),"\n",(0,h.jsxs)(e.h4,{id:"packagejson",children:["packageJson",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packagejson",children:"#"})]}),"\n",(0,h.jsx)(e.p,{children:"H\xe0m callback t\xf9y chỉnh nội dung package.json. Được gọi trước khi đ\xf3ng g\xf3i, d\xf9ng để t\xf9y chỉnh nội dung của package.json."}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:["Tham số:","\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"gez: Gez"})," - Thể hiện Gez"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"pkg: any"})," - Nội dung package.json gốc"]}),"\n"]}),"\n"]}),"\n",(0,h.jsxs)(e.li,{children:["Gi\xe1 trị trả về: ",(0,h.jsx)(e.code,{children:"Promise<any>"})," - Nội dung package.json đ\xe3 được sửa đổi"]}),"\n"]}),"\n",(0,h.jsx)(e.p,{children:"C\xf4ng dụng phổ biến:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"Sửa đổi t\xean g\xf3i v\xe0 số phi\xean bản"}),"\n",(0,h.jsx)(e.li,{children:"Th\xeam hoặc cập nhật c\xe1c phụ thuộc"}),"\n",(0,h.jsx)(e.li,{children:"Th\xeam c\xe1c trường t\xf9y chỉnh"}),"\n",(0,h.jsx)(e.li,{children:"Cấu h\xecnh th\xf4ng tin ph\xe1t h\xe0nh"}),"\n"]}),"\n",(0,h.jsx)(e.p,{children:"V\xed dụ:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-ts",children:"packageJson: async (gez, pkg) => {\n  // Thiết lập th\xf4ng tin g\xf3i\n  pkg.name = 'my-app';\n  pkg.version = '1.0.0';\n  pkg.description = 'Ứng dụng của t\xf4i';\n\n  // Th\xeam phụ thuộc\n  pkg.dependencies = {\n    'vue': '^3.0.0',\n    'express': '^4.17.1'\n  };\n\n  // Th\xeam cấu h\xecnh ph\xe1t h\xe0nh\n  pkg.publishConfig = {\n    registry: 'https://registry.example.com'\n  };\n\n  return pkg;\n}\n"})}),"\n",(0,h.jsxs)(e.h4,{id:"onbefore",children:["onBefore",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#onbefore",children:"#"})]}),"\n",(0,h.jsx)(e.p,{children:"H\xe0m callback chuẩn bị trước khi đ\xf3ng g\xf3i."}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:["Tham số:","\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"gez: Gez"})," - Thể hiện Gez"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"pkg: Record<string, any>"})," - Nội dung package.json"]}),"\n"]}),"\n"]}),"\n",(0,h.jsxs)(e.li,{children:["Gi\xe1 trị trả về: ",(0,h.jsx)(e.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,h.jsx)(e.p,{children:"C\xf4ng dụng phổ biến:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"Th\xeam c\xe1c tệp bổ sung (README, LICENSE, v.v.)"}),"\n",(0,h.jsx)(e.li,{children:"Thực hiện kiểm tra hoặc x\xe1c minh x\xe2y dựng"}),"\n",(0,h.jsx)(e.li,{children:"Tạo t\xe0i liệu hoặc si\xeau dữ liệu"}),"\n",(0,h.jsx)(e.li,{children:"Dọn dẹp c\xe1c tệp tạm thời"}),"\n"]}),"\n",(0,h.jsx)(e.p,{children:"V\xed dụ:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-ts",children:"onBefore: async (gez, pkg) => {\n  // Th\xeam t\xe0i liệu\n  await fs.writeFile('dist/README.md', '# My App');\n  await fs.writeFile('dist/LICENSE', 'MIT License');\n\n  // Thực hiện kiểm tra\n  await runTests();\n\n  // Tạo t\xe0i liệu\n  await generateDocs();\n\n  // Dọn dẹp c\xe1c tệp tạm thời\n  await cleanupTempFiles();\n}\n"})}),"\n",(0,h.jsxs)(e.h4,{id:"onafter",children:["onAfter",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#onafter",children:"#"})]}),"\n",(0,h.jsx)(e.p,{children:"H\xe0m callback xử l\xfd sau khi đ\xf3ng g\xf3i ho\xe0n tất. Được gọi sau khi tệp .tgz được tạo, d\xf9ng để xử l\xfd sản phẩm đ\xf3ng g\xf3i."}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:["Tham số:","\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"gez: Gez"})," - Thể hiện Gez"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"pkg: Record<string, any>"})," - Nội dung package.json"]}),"\n",(0,h.jsxs)(e.li,{children:[(0,h.jsx)(e.code,{children:"file: Buffer"})," - Nội dung tệp đ\xe3 đ\xf3ng g\xf3i"]}),"\n"]}),"\n"]}),"\n",(0,h.jsxs)(e.li,{children:["Gi\xe1 trị trả về: ",(0,h.jsx)(e.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,h.jsx)(e.p,{children:"C\xf4ng dụng phổ biến:"}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsx)(e.li,{children:"Ph\xe1t h\xe0nh l\xean kho lưu trữ npm (c\xf4ng khai hoặc ri\xeang tư)"}),"\n",(0,h.jsx)(e.li,{children:"Tải l\xean m\xe1y chủ t\xe0i nguy\xean tĩnh"}),"\n",(0,h.jsx)(e.li,{children:"Quản l\xfd phi\xean bản"}),"\n",(0,h.jsx)(e.li,{children:"K\xedch hoạt quy tr\xecnh CI/CD"}),"\n"]}),"\n",(0,h.jsx)(e.p,{children:"V\xed dụ:"}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-ts",children:"onAfter: async (gez, pkg, file) => {\n  // Ph\xe1t h\xe0nh l\xean kho lưu trữ npm ri\xeang tư\n  await publishToRegistry(file, {\n    registry: 'https://registry.example.com'\n  });\n\n  // Tải l\xean m\xe1y chủ t\xe0i nguy\xean tĩnh\n  await uploadToServer(file, 'https://assets.example.com/packages');\n\n  // Tạo nh\xe3n phi\xean bản\n  await createGitTag(pkg.version);\n\n  // K\xedch hoạt quy tr\xecnh triển khai\n  await triggerDeploy(pkg.version);\n}\n"})}),"\n",(0,h.jsxs)(e.h2,{id:"v\\xed-dụ-sử-dụng",children:["V\xed dụ sử dụng",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#v\\xed-dụ-sử-dụng",children:"#"})]}),"\n",(0,h.jsx)(e.pre,{children:(0,h.jsx)(e.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n  modules: {\n    // Cấu h\xecnh c\xe1c m\xf4-đun cần xuất\n    exports: [\n      'root:src/components/button.vue',\n      'root:src/utils/format.ts',\n      'npm:vue',\n      'npm:vue-router'\n    ]\n  },\n  // Cấu h\xecnh đ\xf3ng g\xf3i\n  pack: {\n    // K\xedch hoạt chức năng đ\xf3ng g\xf3i\n    enable: true,\n\n    // Xuất nhiều phi\xean bản c\xf9ng l\xfac\n    outputs: [\n      'dist/versions/latest.tgz',\n      'dist/versions/1.0.0.tgz'\n    ],\n\n    // T\xf9y chỉnh package.json\n    packageJson: async (gez, pkg) => {\n      pkg.version = '1.0.0';\n      return pkg;\n    },\n\n    // Chuẩn bị trước khi đ\xf3ng g\xf3i\n    onBefore: async (gez, pkg) => {\n      // Th\xeam c\xe1c tệp cần thiết\n      await fs.writeFile('dist/README.md', '# Your App\\n\\nHướng dẫn xuất m\xf4-đun...');\n      // Thực hiện kiểm tra kiểu\n      await runTypeCheck();\n    },\n\n    // Xử l\xfd sau khi đ\xf3ng g\xf3i\n    onAfter: async (gez, pkg, file) => {\n      // Ph\xe1t h\xe0nh l\xean nguồn npm ri\xeang tư\n      await publishToRegistry(file, {\n        registry: 'https://npm.your-registry.com/'\n      });\n      // Hoặc triển khai l\xean m\xe1y chủ tĩnh\n      await uploadToServer(file, 'https://static.example.com/packages');\n    }\n  }\n} satisfies GezOptions;\n"})})]})}function r(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,c.ah)(),n.components);return e?(0,h.jsx)(e,{...n,children:(0,h.jsx)(s,{...n})}):s(n)}let t=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["vi%2Fapi%2Fcore%2Fpack-config.md"]={toc:[{text:"Định nghĩa kiểu",id:"định-nghĩa-kiểu",depth:2},{text:"PackConfig",id:"packconfig-1",depth:3},{text:"enable",id:"enable",depth:4},{text:"outputs",id:"outputs",depth:4},{text:"packageJson",id:"packagejson",depth:4},{text:"onBefore",id:"onbefore",depth:4},{text:"onAfter",id:"onafter",depth:4},{text:"V\xed dụ sử dụng",id:"v\xed-dụ-sử-dụng",depth:2}],title:"PackConfig",headingTitle:"PackConfig",frontmatter:{titleSuffix:"Tham chiếu API cấu h\xecnh đ\xf3ng g\xf3i của khung Gez",description:"T\xe0i liệu chi tiết về giao diện cấu h\xecnh PackConfig của khung Gez, bao gồm quy tắc đ\xf3ng g\xf3i g\xf3i phần mềm, cấu h\xecnh đầu ra v\xe0 c\xe1c hook v\xf2ng đời, gi\xfap nh\xe0 ph\xe1t triển thực hiện quy tr\xecnh x\xe2y dựng ti\xeau chuẩn.",head:[["meta",{property:"keywords",content:"Gez, PackConfig, đ\xf3ng g\xf3i g\xf3i phần mềm, cấu h\xecnh x\xe2y dựng, hook v\xf2ng đời, cấu h\xecnh đ\xf3ng g\xf3i, khung ứng dụng Web"}]]}}}}]);