"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["6592"],{5353:function(e,n,r){r.r(n),r.d(n,{default:()=>a});var s=r(1549),i=r(6603);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",strong:"strong",h2:"h2",h3:"h3",pre:"pre",code:"code",h4:"h4"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"rendercontext",children:["RenderContext",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rendercontext",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"RenderContext est la classe principale du framework Gez, responsable de la gestion du cycle de vie complet du rendu c\xf4t\xe9 serveur (SSR). Elle fournit une API compl\xe8te pour g\xe9rer le contexte de rendu, la gestion des ressources, la synchronisation des \xe9tats, et d'autres t\xe2ches cl\xe9s :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Contr\xf4le du rendu"})," : G\xe8re le processus de rendu c\xf4t\xe9 serveur, prenant en charge des sc\xe9narios comme le rendu multi-entr\xe9es et le rendu conditionnel."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gestion des ressources"})," : Collecte et injecte intelligemment les ressources statiques comme JS, CSS, etc., pour optimiser les performances de chargement."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Synchronisation des \xe9tats"})," : G\xe8re la s\xe9rialisation des \xe9tats c\xf4t\xe9 serveur, assurant une activation correcte c\xf4t\xe9 client (hydration)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Contr\xf4le du routage"})," : Prend en charge des fonctionnalit\xe9s avanc\xe9es comme les redirections c\xf4t\xe9 serveur et la configuration des codes d'\xe9tat."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"d\\xe9finitions-de-types",children:["D\xe9finitions de types",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#d\\xe9finitions-de-types",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"serverrenderhandle",children:["ServerRenderHandle",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serverrenderhandle",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"D\xe9finition du type de la fonction de traitement du rendu c\xf4t\xe9 serveur."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type ServerRenderHandle = (rc: RenderContext) => Promise<void> | void;\n"})}),"\n",(0,s.jsx)(n.p,{children:"La fonction de traitement du rendu c\xf4t\xe9 serveur est une fonction asynchrone ou synchrone qui prend une instance de RenderContext comme param\xe8tre, utilis\xe9e pour g\xe9rer la logique de rendu c\xf4t\xe9 serveur."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// 1. Fonction asynchrone\nexport default async (rc: RenderContext) => {\n  const app = createApp();\n  const html = await renderToString(app);\n  rc.html = html;\n};\n\n// 2. Fonction synchrone\nexport const simple = (rc: RenderContext) => {\n  rc.html = '<h1>Hello World</h1>';\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"renderfiles",children:["RenderFiles",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#renderfiles",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"D\xe9finition du type de la liste des fichiers de ressources collect\xe9s pendant le processus de rendu."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderFiles {\n  js: string[];\n  css: string[];\n  modulepreload: string[];\n  resources: string[];\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"js"}),": Liste des fichiers JavaScript"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"css"}),": Liste des fichiers de feuilles de style"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"modulepreload"}),": Liste des modules ESM \xe0 pr\xe9charger"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"resources"}),": Liste des autres fichiers de ressources (images, polices, etc.)"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Exemple de liste de fichiers de ressources\nrc.files = {\n  js: [\n    '/assets/entry-client.js',\n    '/assets/vendor.js'\n  ],\n  css: [\n    '/assets/main.css',\n    '/assets/vendor.css'\n  ],\n  modulepreload: [\n    '/assets/Home.js',\n    '/assets/About.js'\n  ],\n  resources: [\n    '/assets/logo.png',\n    '/assets/font.woff2'\n  ]\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmapmode",children:["ImportmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"D\xe9finition du mode de g\xe9n\xe9ration de l'importmap."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type ImportmapMode = 'inline' | 'js';\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"inline"}),": Int\xe8gre directement le contenu de l'importmap dans le HTML, adapt\xe9 aux sc\xe9narios suivants :","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"R\xe9duction du nombre de requ\xeates HTTP"}),"\n",(0,s.jsx)(n.li,{children:"Contenu de l'importmap de petite taille"}),"\n",(0,s.jsx)(n.li,{children:"Exigences \xe9lev\xe9es en mati\xe8re de performances de chargement initial"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"js"}),": G\xe9n\xe8re le contenu de l'importmap en tant que fichier JS s\xe9par\xe9, adapt\xe9 aux sc\xe9narios suivants :","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Contenu de l'importmap volumineux"}),"\n",(0,s.jsx)(n.li,{children:"N\xe9cessit\xe9 d'utiliser le m\xe9canisme de cache du navigateur"}),"\n",(0,s.jsx)(n.li,{children:"Partage du m\xeame importmap entre plusieurs pages"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Classe de contexte de rendu, responsable de la gestion des ressources et de la g\xe9n\xe9ration de HTML pendant le processus de rendu c\xf4t\xe9 serveur (SSR)."}),"\n",(0,s.jsxs)(n.h2,{id:"options-dinstance",children:["Options d'instance",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#options-dinstance",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"D\xe9finition des options de configuration du contexte de rendu."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderContextOptions {\n  base?: string\n  entryName?: string\n  params?: Record<string, any>\n  importmapMode?: ImportmapMode\n}\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"base",children:["base",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Chemin de base des ressources statiques."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Toutes les ressources statiques (JS, CSS, images, etc.) seront charg\xe9es en fonction de ce chemin"}),"\n",(0,s.jsx)(n.li,{children:"Prend en charge la configuration dynamique au moment de l'ex\xe9cution, sans n\xe9cessiter de reconstruction"}),"\n",(0,s.jsx)(n.li,{children:"Souvent utilis\xe9 dans des sc\xe9narios comme les sites multilingues ou les applications micro-frontend"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"entryname",children:["entryName",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Nom de la fonction d'entr\xe9e pour le rendu c\xf4t\xe9 serveur. Utilis\xe9 pour sp\xe9cifier la fonction d'entr\xe9e \xe0 utiliser lors du rendu c\xf4t\xe9 serveur, lorsqu'un module exporte plusieurs fonctions de rendu."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.server.ts"',children:"export const mobile = async (rc: RenderContext) => {\n  // Logique de rendu pour mobile\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // Logique de rendu pour desktop\n};\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"params",children:["params",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Param\xe8tres de rendu. Permet de passer des param\xe8tres de tout type \xe0 la fonction de rendu, souvent utilis\xe9 pour transmettre des informations de requ\xeate (URL, param\xe8tres de requ\xeate, etc.)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN',\n    theme: 'dark'\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"importmapmode-1",children:["importmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Mode de g\xe9n\xe9ration de l'import map :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"inline"}),": Int\xe8gre directement le contenu de l'importmap dans le HTML"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"js"}),": G\xe9n\xe8re le contenu de l'importmap en tant que fichier JS s\xe9par\xe9"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"propri\\xe9t\\xe9s-dinstance",children:["Propri\xe9t\xe9s d'instance",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#propri\\xe9t\\xe9s-dinstance",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"gez",children:["gez",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#gez",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"Gez"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lecture seule"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"R\xe9f\xe9rence \xe0 l'instance Gez. Utilis\xe9e pour acc\xe9der aux fonctionnalit\xe9s et configurations principales du framework."}),"\n",(0,s.jsxs)(n.h3,{id:"redirect",children:["redirect",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#redirect",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"string | null"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Adresse de redirection. Une fois d\xe9finie, le serveur peut effectuer une redirection HTTP en fonction de cette valeur, souvent utilis\xe9e dans des sc\xe9narios comme la v\xe9rification de connexion ou le contr\xf4le des permissions."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Exemple de v\xe9rification de connexion\nexport default async (rc: RenderContext) => {\n  if (!isLoggedIn()) {\n    rc.redirect = '/login';\n    rc.status = 302;\n    return;\n  }\n  // Continuer le rendu de la page...\n};\n\n// Exemple de contr\xf4le des permissions\nexport default async (rc: RenderContext) => {\n  if (!hasPermission()) {\n    rc.redirect = '/403';\n    rc.status = 403;\n    return;\n  }\n  // Continuer le rendu de la page...\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"status",children:["status",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#status",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"number | null"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Code d'\xe9tat HTTP de la r\xe9ponse. Peut \xeatre d\xe9fini \xe0 n'importe quel code d'\xe9tat HTTP valide, souvent utilis\xe9 dans des sc\xe9narios de gestion d'erreurs ou de redirection."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Exemple de gestion d'erreur 404\nexport default async (rc: RenderContext) => {\n  const page = await findPage(rc.params.url);\n  if (!page) {\n    rc.status = 404;\n    // Rendu de la page 404...\n    return;\n  }\n  // Continuer le rendu de la page...\n};\n\n// Exemple de redirection temporaire\nexport default async (rc: RenderContext) => {\n  if (needMaintenance()) {\n    rc.redirect = '/maintenance';\n    rc.status = 307; // Redirection temporaire, conserve la m\xe9thode de requ\xeate\n    return;\n  }\n  // Continuer le rendu de la page...\n};\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"html",children:["html",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Contenu HTML. Utilis\xe9 pour d\xe9finir et obtenir le contenu HTML final g\xe9n\xe9r\xe9, en traitant automatiquement les espaces r\xe9serv\xe9s pour le chemin de base lors de la d\xe9finition."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Utilisation de base\nexport default async (rc: RenderContext) => {\n  // D\xe9finir le contenu HTML\n  rc.html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        ${rc.preload()}\n        ${rc.css()}\n      </head>\n      <body>\n        <div id=\"app\">Hello World</div>\n        ${rc.importmap()}\n        ${rc.moduleEntry()}\n        ${rc.modulePreload()}\n      </body>\n    </html>\n  `;\n};\n\n// Chemin de base dynamique\nconst rc = await gez.render({\n  base: '/app',  // D\xe9finir le chemin de base\n  params: { url: req.url }\n});\n\n// Les espaces r\xe9serv\xe9s dans le HTML seront automatiquement remplac\xe9s :\n// [[[___GEZ_DYNAMIC_BASE___]]]/your-app-name/css/style.css\n// Remplac\xe9 par :\n// /app/your-app-name/css/style.css\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"base-1",children:["base",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#base-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lecture seule"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"''"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Chemin de base des ressources statiques. Toutes les ressources statiques (JS, CSS, images, etc.) seront charg\xe9es en fonction de ce chemin, prenant en charge la configuration dynamique au moment de l'ex\xe9cution."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Utilisation de base\nconst rc = await gez.render({\n  base: '/gez',  // D\xe9finir le chemin de base\n  params: { url: req.url }\n});\n\n// Exemple de site multilingue\nconst rc = await gez.render({\n  base: '/cn',  // Site en chinois\n  params: { lang: 'zh-CN' }\n});\n\n// Exemple d'application micro-frontend\nconst rc = await gez.render({\n  base: '/app1',  // Sous-application 1\n  params: { appId: 1 }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"entryname-1",children:["entryName",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entryname-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lecture seule"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"'default'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Nom de la fonction d'entr\xe9e pour le rendu c\xf4t\xe9 serveur. Utilis\xe9 pour s\xe9lectionner la fonction de rendu \xe0 utiliser dans entry.server.ts."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"// Fonction d'entr\xe9e par d\xe9faut\nexport default async (rc: RenderContext) => {\n  // Logique de rendu par d\xe9faut\n};\n\n// Plusieurs fonctions d'entr\xe9e\nexport const mobile = async (rc: RenderContext) => {\n  // Logique de rendu pour mobile\n};\n\nexport const desktop = async (rc: RenderContext) => {\n  // Logique de rendu pour desktop\n};\n\n// S\xe9lection de la fonction d'entr\xe9e en fonction du type d'appareil\nconst rc = await gez.render({\n  entryName: isMobile ? 'mobile' : 'desktop',\n  params: { url: req.url }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"params-1",children:["params",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#params-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"Record<string, any>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lecture seule"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Param\xe8tres de rendu. Permet de passer et d'acc\xe9der aux param\xe8tres pendant le processus de rendu c\xf4t\xe9 serveur, souvent utilis\xe9 pour transmettre des informations de requ\xeate ou des configurations de page."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Utilisation de base - Transmettre l'URL et les param\xe8tres de langue\nconst rc = await gez.render({\n  params: {\n    url: req.url,\n    lang: 'zh-CN'\n  }\n});\n\n// Configuration de page - D\xe9finir le th\xe8me et la mise en page\nconst rc = await gez.render({\n  params: {\n    theme: 'dark',\n    layout: 'sidebar'\n  }\n});\n\n// Configuration d'environnement - Injecter l'URL de base de l'API\nconst rc = await gez.render({\n  params: {\n    apiBaseUrl: process.env.API_BASE_URL,\n    version: '1.0.0'\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmetaset",children:["importMetaSet",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmetaset",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"Set<ImportMeta>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Ensemble de collecte des d\xe9pendances de modules. Pendant le rendu des composants, les d\xe9pendances de modules sont automatiquement suivies et enregistr\xe9es, ne collectant que les ressources r\xe9ellement utilis\xe9es pendant le rendu de la page actuelle."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Utilisation de base\nconst renderToString = (app: any, context: { importMetaSet: Set<ImportMeta> }) => {\n  // Collecte automatique des d\xe9pendances de modules pendant le rendu\n  // Le framework appelle automatiquement context.importMetaSet.add(import.meta) pendant le rendu des composants\n  // Les d\xe9veloppeurs n'ont pas besoin de g\xe9rer manuellement la collecte des d\xe9pendances\n  return '<div id=\"app\">Hello World</div>';\n};\n\n// Exemple d'utilisation\nconst app = createApp();\nconst html = await renderToString(app, {\n  importMetaSet: rc.importMetaSet\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"files",children:["files",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#files",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"RenderFiles"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Liste des fichiers de ressources :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"js: Liste des fichiers JavaScript"}),"\n",(0,s.jsx)(n.li,{children:"css: Liste des fichiers de feuilles de style"}),"\n",(0,s.jsx)(n.li,{children:"modulepreload: Liste des modules ESM \xe0 pr\xe9charger"}),"\n",(0,s.jsx)(n.li,{children:"resources: Liste des autres fichiers de ressources (images, polices, etc.)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Collecte des ressources\nawait rc.commit();\n\n// Injection des ressources\nrc.html = `\n  <!DOCTYPE html>\n  <html>\n  <head>\n    \x3c!-- Pr\xe9chargement des ressources --\x3e\n    ${rc.preload()}\n    \x3c!-- Injection des feuilles de style --\x3e\n    ${rc.css()}\n  </head>\n  <body>\n    ${html}\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n  </body>\n  </html>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmapmode-2",children:["importmapMode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmapmode-2",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"'inline' | 'js'"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur par d\xe9faut"}),": ",(0,s.jsx)(n.code,{children:"'inline'"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Mode de g\xe9n\xe9ration de l'import map :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"inline"}),": Int\xe8gre directement le contenu de l'importmap dans le HTML"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"js"}),": G\xe9n\xe8re le contenu de l'importmap en tant que fichier JS s\xe9par\xe9"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"m\\xe9thodes-dinstance",children:["M\xe9thodes d'instance",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#m\\xe9thodes-dinstance",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"serialize",children:["serialize()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#serialize",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Param\xe8tres"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"input: any"})," - Donn\xe9es \xe0 s\xe9rialiser"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options?: serialize.SerializeJSOptions"})," - Options de s\xe9rialisation"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur de retour"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"S\xe9rialise un objet JavaScript en cha\xeene de caract\xe8res. Utilis\xe9 pour s\xe9rialiser les donn\xe9es d'\xe9tat pendant le processus de rendu c\xf4t\xe9 serveur, assurant que les donn\xe9es peuvent \xeatre int\xe9gr\xe9es en toute s\xe9curit\xe9 dans le HTML."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const state = {\n  user: { id: 1, name: 'Alice' },\n  timestamp: new Date()\n};\n\nrc.html = `\n  <script>\n    window.__INITIAL_STATE__ = ${rc.serialize(state)};\n  <\/script>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"state",children:["state()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#state",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Param\xe8tres"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"varName: string"})," - Nom de la variable"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data: Record<string, any>"})," - Donn\xe9es d'\xe9tat"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur de retour"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"S\xe9rialise et injecte les donn\xe9es d'\xe9tat dans le HTML. Utilise une m\xe9thode de s\xe9rialisation s\xfbre pour traiter les donn\xe9es, prenant en charge des structures de donn\xe9es complexes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const userInfo = {\n  id: 1,\n  name: 'John',\n  roles: ['admin']\n};\n\nrc.html = `\n  <head>\n    ${rc.state('__USER__', userInfo)}\n  </head>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"commit",children:["commit()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#commit",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur de retour"}),": ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Soumet la collecte des d\xe9pendances et met \xe0 jour la liste des ressources. Collecte tous les modules utilis\xe9s \xe0 partir de importMetaSet, et analyse les ressources sp\xe9cifiques de chaque module en fonction du fichier manifest."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Rendu et soumission des d\xe9pendances\nconst html = await renderToString(app, {\n  importMetaSet: rc.importMetaSet\n});\n\n// Soumission de la collecte des d\xe9pendances\nawait rc.commit();\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"preload",children:["preload()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preload",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur de retour"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"G\xe9n\xe8re les balises de pr\xe9chargement des ressources. Utilis\xe9 pour pr\xe9charger les ressources CSS et JavaScript, prenant en charge la configuration des priorit\xe9s et le traitement automatique du chemin de base."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"rc.html = `\n  <!DOCTYPE html>\n  <html>\n  <head>\n    ${rc.preload()}\n    ${rc.css()}  \x3c!-- Injection des feuilles de style --\x3e\n  </head>\n  <body>\n    ${html}\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n  </body>\n  </html>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"css",children:["css()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#css",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur de retour"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"G\xe9n\xe8re les balises des feuilles de style CSS. Injecte les fichiers CSS collect\xe9s, assurant leur chargement dans le bon ordre."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"rc.html = `\n  <head>\n    ${rc.css()}  \x3c!-- Injection de toutes les feuilles de style collect\xe9es --\x3e\n  </head>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"importmap",children:["importmap()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importmap",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valeur de retour"}),": ",(0,s.jsx)(n.code,{children:"string"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"G\xe9n\xe8re les balises de l'import map. G\xe9n\xe8re l'import map en ligne ou externe en fonction de la configuration importmapMode."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"rc.html = `\n  <head>\n    ${rc.importmap()}  \x3c!-- Injection de l'import map --\x3e\n  </head>\n`;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"moduleentry",children:["moduleEntry()",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#moduleentry",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"**Valeur de retour"}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}let a=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["fr%2Fapi%2Fcore%2Frender-context.md"]={toc:[{text:"D\xe9finitions de types",id:"d\xe9finitions-de-types",depth:2},{text:"ServerRenderHandle",id:"serverrenderhandle",depth:3},{text:"RenderFiles",id:"renderfiles",depth:3},{text:"ImportmapMode",id:"importmapmode",depth:3},{text:"Options d'instance",id:"options-dinstance",depth:2},{text:"base",id:"base",depth:4},{text:"entryName",id:"entryname",depth:4},{text:"params",id:"params",depth:4},{text:"importmapMode",id:"importmapmode-1",depth:4},{text:"Propri\xe9t\xe9s d'instance",id:"propri\xe9t\xe9s-dinstance",depth:2},{text:"gez",id:"gez",depth:3},{text:"redirect",id:"redirect",depth:3},{text:"status",id:"status",depth:3},{text:"html",id:"html",depth:3},{text:"base",id:"base-1",depth:3},{text:"entryName",id:"entryname-1",depth:3},{text:"params",id:"params-1",depth:3},{text:"importMetaSet",id:"importmetaset",depth:3},{text:"files",id:"files",depth:3},{text:"importmapMode",id:"importmapmode-2",depth:3},{text:"M\xe9thodes d'instance",id:"m\xe9thodes-dinstance",depth:2},{text:"serialize()",id:"serialize",depth:3},{text:"state()",id:"state",depth:3},{text:"commit()",id:"commit",depth:3},{text:"preload()",id:"preload",depth:3},{text:"css()",id:"css",depth:3},{text:"importmap()",id:"importmap",depth:3},{text:"moduleEntry()",id:"moduleentry",depth:3}],title:"RenderContext",headingTitle:"RenderContext",frontmatter:{titleSuffix:"R\xe9f\xe9rence de l'API du contexte de rendu du framework Gez",description:"Documentation d\xe9taill\xe9e de la classe principale RenderContext du framework Gez, incluant le contr\xf4le du rendu, la gestion des ressources, la synchronisation des \xe9tats et le contr\xf4le du routage, pour aider les d\xe9veloppeurs \xe0 impl\xe9menter un rendu c\xf4t\xe9 serveur efficace.",head:[["meta",{property:"keywords",content:"Gez, RenderContext, SSR, rendu c\xf4t\xe9 serveur, contexte de rendu, synchronisation des \xe9tats, gestion des ressources, framework d'application Web"}]]}}}}]);