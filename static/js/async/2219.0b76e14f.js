"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["2219"],{8621:function(n,e,r){r.r(e),r.d(e,{default:()=>h});var t=r(1549),c=r(6603);function i(n){let e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3",ol:"ol",li:"li"},(0,c.ah)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:"vue3",children:["Vue3",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#vue3",children:"#"})]}),"\n",(0,t.jsx)(e.p,{children:"Hướng dẫn n\xe0y sẽ gi\xfap bạn x\xe2y dựng một ứng dụng Vue3 SSR từ đầu với Gez. Ch\xfang ta sẽ sử dụng một v\xed dụ ho\xe0n chỉnh để minh họa c\xe1ch tạo ứng dụng render ph\xeda server bằng Gez framework."}),"\n",(0,t.jsxs)(e.h2,{id:"cấu-tr\\xfac-dự-\\xe1n",children:["Cấu tr\xfac dự \xe1n",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#cấu-tr\\xfac-dự-\\xe1n",children:"#"})]}),"\n",(0,t.jsx)(e.p,{children:"Đầu ti\xean, h\xe3y t\xecm hiểu cấu tr\xfac cơ bản của dự \xe1n:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:".\n├── package.json         # File cấu h\xecnh dự \xe1n, định nghĩa c\xe1c dependency v\xe0 script\n├── tsconfig.json        # File cấu h\xecnh TypeScript, thiết lập c\xe1c t\xf9y chọn bi\xean dịch\n└── src                  # Thư mục m\xe3 nguồn\n    ├── app.vue          # Component ch\xednh của ứng dụng, định nghĩa cấu tr\xfac trang v\xe0 logic tương t\xe1c\n    ├── create-app.ts    # Factory tạo instance Vue, chịu tr\xe1ch nhiệm khởi tạo ứng dụng\n    ├── entry.client.ts  # File entry ph\xeda client, xử l\xfd render ph\xeda tr\xecnh duyệt\n    ├── entry.node.ts    # File entry Node.js server, chịu tr\xe1ch nhiệm cấu h\xecnh m\xf4i trường ph\xe1t triển v\xe0 khởi động server\n    └── entry.server.ts  # File entry ph\xeda server, xử l\xfd logic render SSR\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"cấu-h\\xecnh-dự-\\xe1n",children:["Cấu h\xecnh dự \xe1n",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#cấu-h\\xecnh-dự-\\xe1n",children:"#"})]}),"\n",(0,t.jsxs)(e.h3,{id:"packagejson",children:["package.json",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packagejson",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["Tạo file ",(0,t.jsx)(e.code,{children:"package.json"}),", cấu h\xecnh c\xe1c dependency v\xe0 script của dự \xe1n:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "name": "ssr-demo-vue3",\n  "version": "1.0.0",\n  "type": "module",\n  "private": true,\n  "scripts": {\n    "dev": "gez dev",\n    "build": "npm run build:dts && npm run build:ssr",\n    "build:ssr": "gez build",\n    "preview": "gez preview",\n    "start": "NODE_ENV=production node dist/index.js",\n    "build:dts": "vue-tsc --declaration --emitDeclarationOnly --outDir dist/src"\n  },\n  "dependencies": {\n    "@gez/core": "*"\n  },\n  "devDependencies": {\n    "@gez/rspack-vue": "*",\n    "@types/node": "22.8.6",\n    "@vue/server-renderer": "^3.5.13",\n    "typescript": "^5.7.3",\n    "vue": "^3.5.13",\n    "vue-tsc": "^2.1.6"\n  }\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["Sau khi tạo file ",(0,t.jsx)(e.code,{children:"package.json"}),", bạn cần c\xe0i đặt c\xe1c dependency của dự \xe1n. Bạn c\xf3 thể sử dụng một trong c\xe1c lệnh sau để c\xe0i đặt:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"pnpm install\n# hoặc\nyarn install\n# hoặc\nnpm install\n"})}),"\n",(0,t.jsx)(e.p,{children:"Lệnh n\xe0y sẽ c\xe0i đặt tất cả c\xe1c g\xf3i dependency cần thiết, bao gồm Vue3, TypeScript v\xe0 c\xe1c dependency li\xean quan đến SSR."}),"\n",(0,t.jsxs)(e.h3,{id:"tsconfigjson",children:["tsconfig.json",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#tsconfigjson",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["Tạo file ",(0,t.jsx)(e.code,{children:"tsconfig.json"}),", cấu h\xecnh c\xe1c t\xf9y chọn bi\xean dịch TypeScript:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",meta:'title="tsconfig.json"',children:'{\n    "compilerOptions": {\n        "module": "ESNext",\n        "moduleResolution": "node",\n        "isolatedModules": true,\n        "resolveJsonModule": true,\n        \n        "target": "ESNext",\n        "lib": ["ESNext", "DOM"],\n        \n        "strict": true,\n        "skipLibCheck": true,\n        "types": ["@types/node"],\n        \n        "experimentalDecorators": true,\n        "allowSyntheticDefaultImports": true,\n        \n        "baseUrl": ".",\n        "paths": {\n            "ssr-demo-vue3/src/*": ["./src/*"],\n            "ssr-demo-vue3/*": ["./*"]\n        }\n    },\n    "include": ["src"],\n    "exclude": ["dist", "node_modules"]\n}\n'})}),"\n",(0,t.jsxs)(e.h2,{id:"cấu-tr\\xfac-m\\xe3-nguồn",children:["Cấu tr\xfac m\xe3 nguồn",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#cấu-tr\\xfac-m\\xe3-nguồn",children:"#"})]}),"\n",(0,t.jsxs)(e.h3,{id:"appvue",children:["app.vue",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#appvue",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["Tạo component ch\xednh của ứng dụng ",(0,t.jsx)(e.code,{children:"src/app.vue"}),", sử dụng Composition API của Vue3:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",meta:'title="src/app.vue"',children:'<template>\n    <div>\n        <h1><a href="https://www.jsesm.com/guide/frameworks/vue3.html" target="_blank">Hướng dẫn nhanh Gez</a></h1>\n        <time :datetime="time">{{ time }}</time>\n    </div>\n</template>\n\n<script setup lang="ts">\n/**\n * @file V\xed dụ component\n * @description Hiển thị ti\xeau đề trang với thời gian tự động cập nhật, d\xf9ng để minh họa c\xe1c chức năng cơ bản của Gez framework\n */\n\nimport { onMounted, onUnmounted, ref } from \'vue\';\n\n// Thời gian hiện tại, cập nhật mỗi gi\xe2y\nconst time = ref(new Date().toISOString());\nlet timer: NodeJS.Timeout;\n\nonMounted(() => {\n    timer = setInterval(() => {\n        time.value = new Date().toISOString();\n    }, 1000);\n});\n\nonUnmounted(() => {\n    clearInterval(timer);\n});\n<\/script>\n'})}),"\n",(0,t.jsxs)(e.h3,{id:"create-appts",children:["create-app.ts",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#create-appts",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["Tạo file ",(0,t.jsx)(e.code,{children:"src/create-app.ts"}),", chịu tr\xe1ch nhiệm tạo instance Vue:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",meta:'title="src/create-app.ts"',children:"/**\n * @file Tạo instance Vue\n * @description Chịu tr\xe1ch nhiệm tạo v\xe0 cấu h\xecnh instance Vue\n */\n\nimport { createSSRApp } from 'vue';\nimport App from './app.vue';\n\nexport function createApp() {\n    const app = createSSRApp(App);\n    return {\n        app\n    };\n}\n"})}),"\n",(0,t.jsxs)(e.h3,{id:"entryclientts",children:["entry.client.ts",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#entryclientts",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["Tạo file entry ph\xeda client ",(0,t.jsx)(e.code,{children:"src/entry.client.ts"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",meta:'title="src/entry.client.ts"',children:"/**\n * @file File entry ph\xeda client\n * @description Chịu tr\xe1ch nhiệm xử l\xfd logic tương t\xe1c ph\xeda client v\xe0 cập nhật động\n */\n\nimport { createApp } from './create-app';\n\n// Tạo instance Vue\nconst { app } = createApp();\n\n// Mount instance Vue\napp.mount('#app');\n"})}),"\n",(0,t.jsxs)(e.h3,{id:"entrynodets",children:["entry.node.ts",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#entrynodets",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["Tạo file ",(0,t.jsx)(e.code,{children:"entry.node.ts"}),", cấu h\xecnh m\xf4i trường ph\xe1t triển v\xe0 khởi động server:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"/**\n * @file File entry Node.js server\n * @description Chịu tr\xe1ch nhiệm cấu h\xecnh m\xf4i trường ph\xe1t triển v\xe0 khởi động server, cung cấp m\xf4i trường runtime SSR\n */\n\nimport http from 'node:http';\nimport type { GezOptions } from '@gez/core';\n\nexport default {\n    /**\n     * Cấu h\xecnh app creator cho m\xf4i trường ph\xe1t triển\n     * @description Tạo v\xe0 cấu h\xecnh instance Rspack, d\xf9ng để build v\xe0 cập nhật n\xf3ng trong m\xf4i trường ph\xe1t triển\n     * @param gez Instance Gez framework, cung cấp c\xe1c chức năng v\xe0 interface cấu h\xecnh\n     * @returns Trả về instance Rspack đ\xe3 được cấu h\xecnh, hỗ trợ HMR v\xe0 xem trước thời gian thực\n     */\n    async devApp(gez) {\n        return import('@gez/rspack-vue').then((m) =>\n            m.createRspackVue3App(gez, {\n                config(context) {\n                    // T\xf9y chỉnh cấu h\xecnh bi\xean dịch Rspack tại đ\xe2y\n                }\n            })\n        );\n    },\n\n    /**\n     * Cấu h\xecnh v\xe0 khởi động HTTP server\n     * @description Tạo instance HTTP server, t\xedch hợp middleware Gez, xử l\xfd y\xeau cầu SSR\n     * @param gez Instance Gez framework, cung cấp middleware v\xe0 chức năng render\n     */\n    async server(gez) {\n        const server = http.createServer((req, res) => {\n            // Sử dụng middleware Gez để xử l\xfd y\xeau cầu\n            gez.middleware(req, res, async () => {\n                // Thực hiện render ph\xeda server\n                const rc = await gez.render({\n                    params: { url: req.url }\n                });\n                res.end(rc.html);\n            });\n        });\n\n        server.listen(3000, () => {\n            console.log('Server đ\xe3 khởi động: http://localhost:3000');\n        });\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,t.jsx)(e.p,{children:"File n\xe0y l\xe0 file entry cấu h\xecnh m\xf4i trường ph\xe1t triển v\xe0 khởi động server, bao gồm hai chức năng ch\xednh:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["H\xe0m ",(0,t.jsx)(e.code,{children:"devApp"}),": Chịu tr\xe1ch nhiệm tạo v\xe0 cấu h\xecnh instance Rspack cho m\xf4i trường ph\xe1t triển, hỗ trợ cập nhật n\xf3ng v\xe0 xem trước thời gian thực. Ở đ\xe2y sử dụng ",(0,t.jsx)(e.code,{children:"createRspackVue3App"})," để tạo instance Rspack d\xe0nh ri\xeang cho Vue3."]}),"\n",(0,t.jsxs)(e.li,{children:["H\xe0m ",(0,t.jsx)(e.code,{children:"server"}),": Chịu tr\xe1ch nhiệm tạo v\xe0 cấu h\xecnh HTTP server, t\xedch hợp middleware Gez để xử l\xfd y\xeau cầu SSR."]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"entryserverts",children:["entry.server.ts",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#entryserverts",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["Tạo file entry render ph\xeda server ",(0,t.jsx)(e.code,{children:"src/entry.server.ts"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",meta:'title="src/entry.server.ts"',children:"/**\n * @file File entry render ph\xeda server\n * @description Chịu tr\xe1ch nhiệm quy tr\xecnh render ph\xeda server, tạo HTML v\xe0 ch\xe8n t\xe0i nguy\xean\n */\n\nimport type { RenderContext } from '@gez/core';\nimport { renderToString } from '@vue/server-renderer';\nimport { createApp } from './create-app';\n\nexport default async (rc: RenderContext) => {\n    // Tạo instance Vue\n    const { app } = createApp();\n\n    // Sử dụng renderToString của Vue để tạo nội dung trang\n    const html = await renderToString(app, {\n        importMetaSet: rc.importMetaSet\n    });\n\n    // Commit thu thập dependency, đảm bảo tất cả t\xe0i nguy\xean cần thiết được tải\n    await rc.commit();\n\n    // Tạo cấu tr\xfac HTML ho\xe0n chỉnh\n    rc.html = `<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    ${rc.preload()}\n    <title>Hướng dẫn nhanh Gez</title>\n    ${rc.css()}\n</head>\n<body>\n    <div id=\"app\">${html}</div>\n    ${rc.importmap()}\n    ${rc.moduleEntry()}\n    ${rc.modulePreload()}\n</body>\n</html>\n`;\n};\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"chạy-dự-\\xe1n",children:["Chạy dự \xe1n",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#chạy-dự-\\xe1n",children:"#"})]}),"\n",(0,t.jsx)(e.p,{children:"Sau khi ho\xe0n th\xe0nh c\xe1c cấu h\xecnh file tr\xean, bạn c\xf3 thể sử dụng c\xe1c lệnh sau để chạy dự \xe1n:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Chế độ ph\xe1t triển:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsx)(e.li,{children:"Build dự \xe1n:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"3",children:["\n",(0,t.jsx)(e.li,{children:"Chạy m\xf4i trường production:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"npm run start\n"})}),"\n",(0,t.jsxs)(e.p,{children:["B\xe2y giờ, bạn đ\xe3 tạo th\xe0nh c\xf4ng một ứng dụng Vue3 SSR với Gez! Truy cập ",(0,t.jsx)(e.a,{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer",children:"http://localhost:3000"})," để xem kết quả."]})]})}function s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,c.ah)(),n.components);return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(i,{...n})}):i(n)}let h=s;s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["vi%2Fguide%2Fframeworks%2Fvue3.md"]={toc:[{text:"Cấu tr\xfac dự \xe1n",id:"cấu-tr\xfac-dự-\xe1n",depth:2},{text:"Cấu h\xecnh dự \xe1n",id:"cấu-h\xecnh-dự-\xe1n",depth:2},{text:"package.json",id:"packagejson",depth:3},{text:"tsconfig.json",id:"tsconfigjson",depth:3},{text:"Cấu tr\xfac m\xe3 nguồn",id:"cấu-tr\xfac-m\xe3-nguồn",depth:2},{text:"app.vue",id:"appvue",depth:3},{text:"create-app.ts",id:"create-appts",depth:3},{text:"entry.client.ts",id:"entryclientts",depth:3},{text:"entry.node.ts",id:"entrynodets",depth:3},{text:"entry.server.ts",id:"entryserverts",depth:3},{text:"Chạy dự \xe1n",id:"chạy-dự-\xe1n",depth:2}],title:"Vue3",headingTitle:"Vue3",frontmatter:{titleSuffix:"V\xed dụ ứng dụng Vue3 SSR với Gez Framework",description:"Hướng dẫn x\xe2y dựng ứng dụng Vue3 SSR từ đầu với Gez, qua v\xed dụ minh họa c\xe1ch sử dụng cơ bản của framework, bao gồm khởi tạo dự \xe1n, cấu h\xecnh Vue3 v\xe0 thiết lập file entry.",head:[["meta",{property:"keywords",content:"Gez, Vue3, Ứng dụng SSR, Cấu h\xecnh TypeScript, Khởi tạo dự \xe1n, Render ph\xeda server, Tương t\xe1c ph\xeda client, Composition API"}]]}}}}]);