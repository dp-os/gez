"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["9964"],{6526:function(e,n,r){r.r(n),r.d(n,{default:()=>l});var s=r(1549),i=r(6603);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",h4:"h4"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"moduleconfig",children:["ModuleConfig",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#moduleconfig",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"ModuleConfig предоставляет функциональность конфигурации модулей в Gez, позволяя определять правила импорта/экспорта модулей, настройку алиасов и внешние зависимости."}),"\n",(0,s.jsxs)(n.h2,{id:"определение-типов",children:["Определение типов",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#определение-типов",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"pathtype",children:["PathType",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#pathtype",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Определение типа"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"enum PathType {\n  npm = 'npm:', \n  root = 'root:'\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Перечисление типов путей модулей:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"npm"}),": указывает на зависимости в node_modules"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"root"}),": указывает на файлы в корневой директории проекта"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"moduleconfig-1",children:["ModuleConfig",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#moduleconfig-1",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Определение типа"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface ModuleConfig {\n  exports?: string[]\n  imports?: Record<string, string>\n  externals?: Record<string, string>\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Интерфейс конфигурации модулей, используемый для определения экспорта, импорта и внешних зависимостей сервиса."}),"\n",(0,s.jsxs)(n.h4,{id:"exports",children:["exports",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exports",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Список конфигураций экспорта, который позволяет открывать определённые единицы кода (например, компоненты, утилиты и т.д.) в формате ESM."}),"\n",(0,s.jsx)(n.p,{children:"Поддерживаются два типа:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"root:*"}),": экспорт исходных файлов, например: 'root:src/components/button.vue'"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"npm:*"}),": экспорт сторонних зависимостей, например: 'npm:vue'"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"imports",children:["imports",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#imports",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Карта конфигураций импорта, которая определяет удалённые модули и их локальные пути."}),"\n",(0,s.jsx)(n.p,{children:"Конфигурация зависит от способа установки:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Установка из исходников (Workspace, Git): необходимо указывать на директорию dist"}),"\n",(0,s.jsx)(n.li,{children:"Установка пакетов (Link, статический сервер, приватный репозиторий, File): указывать напрямую на директорию пакета"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"externals",children:["externals",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#externals",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Карта внешних зависимостей, которая определяет используемые внешние зависимости, обычно это зависимости из удалённых модулей."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Пример"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n  modules: {\n    // Конфигурация экспорта\n    exports: [\n      'root:src/components/button.vue',  // Экспорт исходного файла\n      'root:src/utils/format.ts',\n      'npm:vue',  // Экспорт сторонней зависимости\n      'npm:vue-router'\n    ],\n\n    // Конфигурация импорта\n    imports: {\n      // Установка из исходников: необходимо указывать на директорию dist\n      'ssr-remote': 'root:./node_modules/ssr-remote/dist',\n      // Установка пакетов: указывать напрямую на директорию пакета\n      'other-remote': 'root:./node_modules/other-remote'\n    },\n\n    // Конфигурация внешних зависимостей\n    externals: {\n      'vue': 'ssr-remote/npm/vue',\n      'vue-router': 'ssr-remote/npm/vue-router'\n    }\n  }\n} satisfies GezOptions;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"parsedmoduleconfig",children:["ParsedModuleConfig",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#parsedmoduleconfig",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Определение типа"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface ParsedModuleConfig {\n  name: string\n  root: string\n  exports: {\n    name: string\n    type: PathType\n    importName: string\n    exportName: string\n    exportPath: string\n    externalName: string\n  }[]\n  imports: {\n    name: string\n    localPath: string\n  }[]\n  externals: Record<string, { match: RegExp; import?: string }>\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Разобранная конфигурация модулей, которая преобразует исходную конфигурацию в стандартизированный внутренний формат:"}),"\n",(0,s.jsxs)(n.h4,{id:"name",children:["name",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#name",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Имя текущего сервиса"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Используется для идентификации модулей и генерации путей импорта"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"root",children:["root",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#root",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Путь к корневой директории текущего сервиса"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Используется для разрешения относительных путей и хранения артефактов сборки"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"exports-1",children:["exports",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exports-1",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Список конфигураций экспорта"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": исходный путь экспорта, например: 'npm:vue' или 'root:src/components'"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"}),": тип пути (npm или root)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"importName"}),": имя импорта, формат: '${serviceName}/${type}/${path}'"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exportName"}),": путь экспорта, относительно корневой директории сервиса"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exportPath"}),": фактический путь к файлу"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"externalName"}),": имя внешней зависимости, используемое для идентификации при импорте этого модуля в других сервисах"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"imports-1",children:["imports",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#imports-1",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Список конфигураций импорта"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": имя внешнего сервиса"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"localPath"}),": локальный путь хранения, используемый для хранения артефактов сборки внешних модулей"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"externals-1",children:["externals",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#externals-1",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Карта внешних зависимостей"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Сопоставляет пути импорта модулей с фактическими путями модулей"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"match"}),": регулярное выражение для сопоставления операторов импорта"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"import"}),": фактический путь к модулю"]}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["ru%2Fapi%2Fcore%2Fmodule-config.md"]={toc:[{text:"Определение типов",id:"определение-типов",depth:2},{text:"PathType",id:"pathtype",depth:3},{text:"ModuleConfig",id:"moduleconfig-1",depth:3},{text:"exports",id:"exports",depth:4},{text:"imports",id:"imports",depth:4},{text:"externals",id:"externals",depth:4},{text:"ParsedModuleConfig",id:"parsedmoduleconfig",depth:3},{text:"name",id:"name",depth:4},{text:"root",id:"root",depth:4},{text:"exports",id:"exports-1",depth:4},{text:"imports",id:"imports-1",depth:4},{text:"externals",id:"externals-1",depth:4}],title:"ModuleConfig",headingTitle:"ModuleConfig",frontmatter:{titleSuffix:"Справочник API конфигурации модулей Gez",description:"Подробное описание интерфейса конфигурации ModuleConfig в Gez, включая правила импорта/экспорта модулей, настройку алиасов и управление внешними зависимостями, чтобы помочь разработчикам глубже понять модульную систему фреймворка.",head:[["meta",{property:"keywords",content:"Gez, ModuleConfig, конфигурация модулей, импорт/экспорт модулей, внешние зависимости, настройка алиасов, управление зависимостями, фреймворк для веб-приложений"}]]}}}}]);