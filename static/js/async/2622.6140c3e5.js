"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["2622"],{9007:function(n,e,r){r.r(e),r.d(e,{default:()=>d});var i=r(1549),h=r(6603);function s(n){let e=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",h3:"h3",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",h4:"h4",ol:"ol",div:"div"},(0,h.ah)(),n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h1,{id:"gez",children:["Gez",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#gez",children:"#"})]}),"\n",(0,i.jsxs)(e.h2,{id:"giới-thiệu",children:["Giới thiệu",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#giới-thiệu",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"Gez l\xe0 một framework ứng dụng web hiệu suất cao dựa tr\xean Rspack, cung cấp đầy đủ c\xe1c khả năng quản l\xfd v\xf2ng đời ứng dụng, xử l\xfd t\xe0i nguy\xean tĩnh v\xe0 render ph\xeda m\xe1y chủ."}),"\n",(0,i.jsxs)(e.h2,{id:"định-nghĩa-kiểu",children:["Định nghĩa kiểu",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#định-nghĩa-kiểu",children:"#"})]}),"\n",(0,i.jsxs)(e.h3,{id:"runtimetarget",children:["RuntimeTarget",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#runtimetarget",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Định nghĩa kiểu"}),":"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"type RuntimeTarget = 'client' | 'server'\n"})}),"\n",(0,i.jsx)(e.p,{children:"Loại m\xf4i trường thời gian chạy ứng dụng:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"client"}),": Chạy trong m\xf4i trường tr\xecnh duyệt, hỗ trợ thao t\xe1c DOM v\xe0 API tr\xecnh duyệt"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"server"}),": Chạy trong m\xf4i trường Node.js, hỗ trợ hệ thống tệp v\xe0 c\xe1c chức năng ph\xeda m\xe1y chủ"]}),"\n"]}),"\n",(0,i.jsxs)(e.h3,{id:"importmap",children:["ImportMap",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#importmap",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Định nghĩa kiểu"}),":"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"type ImportMap = {\n  imports?: SpecifierMap\n  scopes?: ScopesMap\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"Loại \xe1nh xạ nhập khẩu module ES."}),"\n",(0,i.jsxs)(e.h4,{id:"specifiermap",children:["SpecifierMap",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#specifiermap",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Định nghĩa kiểu"}),":"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"type SpecifierMap = Record<string, string>\n"})}),"\n",(0,i.jsx)(e.p,{children:"Loại \xe1nh xạ định danh module, d\xf9ng để định nghĩa mối quan hệ \xe1nh xạ đường dẫn nhập khẩu module."}),"\n",(0,i.jsxs)(e.h4,{id:"scopesmap",children:["ScopesMap",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#scopesmap",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Định nghĩa kiểu"}),":"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"type ScopesMap = Record<string, SpecifierMap>\n"})}),"\n",(0,i.jsx)(e.p,{children:"Loại \xe1nh xạ phạm vi, d\xf9ng để định nghĩa mối quan hệ \xe1nh xạ nhập khẩu module trong phạm vi cụ thể."}),"\n",(0,i.jsxs)(e.h3,{id:"command",children:["COMMAND",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#command",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Định nghĩa kiểu"}),":"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"enum COMMAND {\n    dev = 'dev',\n    build = 'build',\n    preview = 'preview',\n    start = 'start'\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"Loại enum lệnh:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"dev"}),": Lệnh m\xf4i trường ph\xe1t triển, khởi động m\xe1y chủ ph\xe1t triển v\xe0 hỗ trợ cập nhật n\xf3ng"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"build"}),": Lệnh build, tạo ra c\xe1c sản phẩm build cho m\xf4i trường sản xuất"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"preview"}),": Lệnh xem trước, khởi động m\xe1y chủ xem trước cục bộ"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"start"}),": Lệnh khởi động, chạy m\xe1y chủ m\xf4i trường sản xuất"]}),"\n"]}),"\n",(0,i.jsxs)(e.h2,{id:"t\\xf9y-chọn-instance",children:["T\xf9y chọn instance",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#t\\xf9y-chọn-instance",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"Định nghĩa c\xe1c t\xf9y chọn cấu h\xecnh cốt l\xf5i của framework Gez."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"interface GezOptions {\n  root?: string\n  isProd?: boolean\n  basePathPlaceholder?: string | false\n  modules?: ModuleConfig\n  packs?: PackConfig\n  devApp?: (gez: Gez) => Promise<App>\n  server?: (gez: Gez) => Promise<void>\n  postBuild?: (gez: Gez) => Promise<void>\n}\n"})}),"\n",(0,i.jsxs)(e.h4,{id:"root",children:["root",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#root",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"string"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Mặc định"}),": ",(0,i.jsx)(e.code,{children:"process.cwd()"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Đường dẫn thư mục gốc của dự \xe1n. C\xf3 thể l\xe0 đường dẫn tuyệt đối hoặc tương đối, đường dẫn tương đối được ph\xe2n giải dựa tr\xean thư mục l\xe0m việc hiện tại."}),"\n",(0,i.jsxs)(e.h4,{id:"isprod",children:["isProd",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#isprod",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"boolean"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Mặc định"}),": ",(0,i.jsx)(e.code,{children:"process.env.NODE_ENV === 'production'"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Định danh m\xf4i trường."}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"true"}),": M\xf4i trường sản xuất"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"false"}),": M\xf4i trường ph\xe1t triển"]}),"\n"]}),"\n",(0,i.jsxs)(e.h4,{id:"basepathplaceholder",children:["basePathPlaceholder",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#basepathplaceholder",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"string | false"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Mặc định"}),": ",(0,i.jsx)(e.code,{children:"'[[[___GEZ_DYNAMIC_BASE___]]]'"})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["Cấu h\xecnh tr\xecnh giữ chỗ đường dẫn cơ sở. D\xf9ng để thay thế động đường dẫn cơ sở của t\xe0i nguy\xean trong thời gian chạy. Đặt th\xe0nh ",(0,i.jsx)(e.code,{children:"false"})," để v\xf4 hiệu h\xf3a t\xednh năng n\xe0y."]}),"\n",(0,i.jsxs)(e.h4,{id:"modules",children:["modules",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#modules",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"ModuleConfig"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"T\xf9y chọn cấu h\xecnh module. D\xf9ng để cấu h\xecnh c\xe1c quy tắc ph\xe2n giải module của dự \xe1n, bao gồm b\xed danh module, c\xe1c phụ thuộc b\xean ngo\xe0i, v.v."}),"\n",(0,i.jsxs)(e.h4,{id:"packs",children:["packs",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packs",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"PackConfig"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"T\xf9y chọn cấu h\xecnh đ\xf3ng g\xf3i. D\xf9ng để đ\xf3ng g\xf3i c\xe1c sản phẩm build th\xe0nh c\xe1c g\xf3i phần mềm .tgz npm ti\xeau chuẩn."}),"\n",(0,i.jsxs)(e.h4,{id:"devapp",children:["devApp",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#devapp",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"(gez: Gez) => Promise<App>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"H\xe0m tạo ứng dụng m\xf4i trường ph\xe1t triển. Chỉ được sử dụng trong m\xf4i trường ph\xe1t triển, d\xf9ng để tạo instance ứng dụng cho m\xe1y chủ ph\xe1t triển."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"export default {\n  async devApp(gez) {\n    return import('@gez/rspack').then((m) =>\n      m.createRspackHtmlApp(gez, {\n        config(context) {\n          // T\xf9y chỉnh cấu h\xecnh Rspack\n        }\n      })\n    )\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.h4,{id:"server",children:["server",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#server",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"(gez: Gez) => Promise<void>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"H\xe0m cấu h\xecnh khởi động m\xe1y chủ. D\xf9ng để cấu h\xecnh v\xe0 khởi động m\xe1y chủ HTTP, c\xf3 thể sử dụng trong cả m\xf4i trường ph\xe1t triển v\xe0 sản xuất."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"export default {\n  async server(gez) {\n    const server = http.createServer((req, res) => {\n      gez.middleware(req, res, async () => {\n        const render = await gez.render({\n          params: { url: req.url }\n        });\n        res.end(render.html);\n      });\n    });\n\n    server.listen(3000);\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.h4,{id:"postbuild",children:["postBuild",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#postbuild",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"(gez: Gez) => Promise<void>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"H\xe0m xử l\xfd hậu build. Được thực thi sau khi dự \xe1n build xong, c\xf3 thể d\xf9ng để:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Thực hiện xử l\xfd t\xe0i nguy\xean bổ sung"}),"\n",(0,i.jsx)(e.li,{children:"Thực hiện c\xe1c thao t\xe1c triển khai"}),"\n",(0,i.jsx)(e.li,{children:"Tạo c\xe1c tệp tĩnh"}),"\n",(0,i.jsx)(e.li,{children:"Gửi th\xf4ng b\xe1o build"}),"\n"]}),"\n",(0,i.jsxs)(e.h2,{id:"thuộc-t\\xednh-instance",children:["Thuộc t\xednh instance",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#thuộc-t\\xednh-instance",children:"#"})]}),"\n",(0,i.jsxs)(e.h3,{id:"name",children:["name",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#name",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"string"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"T\xean module hiện tại, được lấy từ cấu h\xecnh module."}),"\n",(0,i.jsxs)(e.h3,{id:"varname",children:["varName",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#varname",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"string"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"T\xean biến JavaScript hợp lệ được tạo dựa tr\xean t\xean module."}),"\n",(0,i.jsxs)(e.h3,{id:"root-1",children:["root",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#root-1",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"string"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["Đường dẫn tuyệt đối của thư mục gốc dự \xe1n. Nếu ",(0,i.jsx)(e.code,{children:"root"})," được cấu h\xecnh l\xe0 đường dẫn tương đối, n\xf3 sẽ được ph\xe2n giải dựa tr\xean thư mục l\xe0m việc hiện tại."]}),"\n",(0,i.jsxs)(e.h3,{id:"isprod-1",children:["isProd",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#isprod-1",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"boolean"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["X\xe1c định xem hiện tại c\xf3 phải l\xe0 m\xf4i trường sản xuất hay kh\xf4ng. Ưu ti\xean sử dụng ",(0,i.jsx)(e.code,{children:"isProd"})," trong cấu h\xecnh, nếu kh\xf4ng được cấu h\xecnh th\xec sẽ x\xe1c định dựa tr\xean ",(0,i.jsx)(e.code,{children:"process.env.NODE_ENV"}),"."]}),"\n",(0,i.jsxs)(e.h3,{id:"basepath",children:["basePath",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#basepath",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"string"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"N\xe9m ra"}),": ",(0,i.jsx)(e.code,{children:"NotReadyError"})," - Khi framework chưa được khởi tạo"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["Lấy đường dẫn cơ sở của module bắt đầu v\xe0 kết th\xfac bằng dấu gạch ch\xe9o. Định dạng trả về l\xe0 ",(0,i.jsx)(e.code,{children:"/${name}/"}),", trong đ\xf3 name được lấy từ cấu h\xecnh module."]}),"\n",(0,i.jsxs)(e.h3,{id:"basepathplaceholder-1",children:["basePathPlaceholder",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#basepathplaceholder-1",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"string"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Lấy tr\xecnh giữ chỗ đường dẫn cơ sở d\xf9ng để thay thế động trong thời gian chạy. C\xf3 thể v\xf4 hiệu h\xf3a th\xf4ng qua cấu h\xecnh."}),"\n",(0,i.jsxs)(e.h3,{id:"middleware",children:["middleware",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#middleware",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"Middleware"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Lấy middleware xử l\xfd t\xe0i nguy\xean tĩnh. Cung cấp c\xe1c triển khai kh\xe1c nhau t\xf9y theo m\xf4i trường:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"M\xf4i trường ph\xe1t triển: Hỗ trợ bi\xean dịch m\xe3 nguồn thời gian thực, cập nhật n\xf3ng"}),"\n",(0,i.jsx)(e.li,{children:"M\xf4i trường sản xuất: Hỗ trợ bộ nhớ đệm d\xe0i hạn cho t\xe0i nguy\xean tĩnh"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const server = http.createServer((req, res) => {\n  gez.middleware(req, res, async () => {\n    const rc = await gez.render({ url: req.url });\n    res.end(rc.html);\n  });\n});\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"render",children:["render",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#render",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"(options?: RenderContextOptions) => Promise<RenderContext>"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Lấy h\xe0m render ph\xeda m\xe1y chủ. Cung cấp c\xe1c triển khai kh\xe1c nhau t\xf9y theo m\xf4i trường:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"M\xf4i trường ph\xe1t triển: Hỗ trợ cập nhật n\xf3ng v\xe0 xem trước thời gian thực"}),"\n",(0,i.jsx)(e.li,{children:"M\xf4i trường sản xuất: Cung cấp hiệu suất render tối ưu"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// C\xe1ch sử dụng cơ bản\nconst rc = await gez.render({\n  params: { url: req.url }\n});\n\n// Cấu h\xecnh n\xe2ng cao\nconst rc = await gez.render({\n  base: '',                    // Đường dẫn cơ sở\n  importmapMode: 'inline',     // Chế độ \xe1nh xạ nhập khẩu\n  entryName: 'default',        // Điểm v\xe0o render\n  params: {\n    url: req.url,\n    state: { user: 'admin' }   // Dữ liệu trạng th\xe1i\n  }\n});\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"command-1",children:["COMMAND",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#command-1",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"typeof COMMAND"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Lấy định nghĩa loại enum lệnh."}),"\n",(0,i.jsxs)(e.h3,{id:"moduleconfig",children:["moduleConfig",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#moduleconfig",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"ParsedModuleConfig"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"N\xe9m ra"}),": ",(0,i.jsx)(e.code,{children:"NotReadyError"})," - Khi framework chưa được khởi tạo"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Lấy th\xf4ng tin cấu h\xecnh đầy đủ của module hiện tại, bao gồm c\xe1c quy tắc ph\xe2n giải module, cấu h\xecnh b\xed danh, v.v."}),"\n",(0,i.jsxs)(e.h3,{id:"packconfig",children:["packConfig",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#packconfig",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Loại"}),": ",(0,i.jsx)(e.code,{children:"ParsedPackConfig"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Chỉ đọc"}),": ",(0,i.jsx)(e.code,{children:"true"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"N\xe9m ra"}),": ",(0,i.jsx)(e.code,{children:"NotReadyError"})," - Khi framework chưa được khởi tạo"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Lấy cấu h\xecnh li\xean quan đến đ\xf3ng g\xf3i của module hiện tại, bao gồm đường dẫn đầu ra, xử l\xfd package.json, v.v."}),"\n",(0,i.jsxs)(e.h2,{id:"phương-thức-instance",children:["Phương thức instance",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#phương-thức-instance",children:"#"})]}),"\n",(0,i.jsxs)(e.h3,{id:"constructor",children:["constructor()",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#constructor",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Tham số"}),":","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"options?: GezOptions"})," - T\xf9y chọn cấu h\xecnh framework"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Gi\xe1 trị trả về"}),": ",(0,i.jsx)(e.code,{children:"Gez"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Tạo instance framework Gez."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const gez = new Gez({\n  root: './src',\n  isProd: process.env.NODE_ENV === 'production'\n});\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"init",children:["init()",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#init",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Tham số"}),": ",(0,i.jsx)(e.code,{children:"command: COMMAND"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Gi\xe1 trị trả về"}),": ",(0,i.jsx)(e.code,{children:"Promise<boolean>"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"N\xe9m ra"}),":","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Error"}),": Khi khởi tạo lại"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"NotReadyError"}),": Khi truy cập instance chưa được khởi tạo"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Khởi tạo instance framework Gez. Thực hiện c\xe1c quy tr\xecnh khởi tạo cốt l\xf5i sau:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Ph\xe2n giải cấu h\xecnh dự \xe1n (package.json, cấu h\xecnh module, cấu h\xecnh đ\xf3ng g\xf3i, v.v.)"}),"\n",(0,i.jsx)(e.li,{children:"Tạo instance ứng dụng (m\xf4i trường ph\xe1t triển hoặc sản xuất)"}),"\n",(0,i.jsx)(e.li,{children:"Thực thi c\xe1c phương thức v\xf2ng đời tương ứng dựa tr\xean lệnh"}),"\n"]}),"\n",(0,i.jsxs)(e.div,{className:"rspress-directive warning",children:[(0,i.jsx)(e.div,{className:"rspress-directive-title",children:"Lưu \xfd"}),(0,i.jsxs)(e.div,{className:"rspress-directive-content",children:["\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"N\xe9m lỗi khi khởi tạo lại"}),"\n",(0,i.jsxs)(e.li,{children:["N\xe9m ",(0,i.jsx)(e.code,{children:"NotReadyError"})," khi truy cập instance chưa được khởi tạo"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const gez = new Gez({\n  root: './src',\n  isProd: process.env.NODE_ENV === 'production'\n});\n\nawait gez.init(COMMAND.dev);\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"destroy",children:["destroy()",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#destroy",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Gi\xe1 trị trả về"}),": ",(0,i.jsx)(e.code,{children:"Promise<boolean>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Hủy instance framework Gez, thực hiện c\xe1c thao t\xe1c dọn dẹp t\xe0i nguy\xean v\xe0 đ\xf3ng kết nối. Chủ yếu d\xf9ng để:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Đ\xf3ng m\xe1y chủ ph\xe1t triển"}),"\n",(0,i.jsx)(e.li,{children:"Dọn dẹp c\xe1c tệp tạm thời v\xe0 bộ nhớ đệm"}),"\n",(0,i.jsx)(e.li,{children:"Giải ph\xf3ng t\xe0i nguy\xean hệ thống"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"process.once('SIGTERM', async () => {\n  await gez.destroy();\n  process.exit(0);\n});\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"build",children:["build()",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#build",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Gi\xe1 trị trả về"}),": ",(0,i.jsx)(e.code,{children:"Promise<boolean>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Thực thi quy tr\xecnh build ứng dụng, bao gồm:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Bi\xean dịch m\xe3 nguồn"}),"\n",(0,i.jsx)(e.li,{children:"Tạo ra c\xe1c sản phẩm build cho m\xf4i trường sản xuất"}),"\n",(0,i.jsx)(e.li,{children:"Tối ưu h\xf3a v\xe0 n\xe9n m\xe3"}),"\n",(0,i.jsx)(e.li,{children:"Tạo danh s\xe1ch t\xe0i nguy\xean"}),"\n"]}),"\n",(0,i.jsxs)(e.div,{className:"rspress-directive warning",children:[(0,i.jsx)(e.div,{className:"rspress-directive-title",children:"Lưu \xfd"}),(0,i.jsx)(e.div,{className:"rspress-directive-content",children:(0,i.jsxs)(e.p,{children:["N\xe9m ",(0,i.jsx)(e.code,{children:"NotReadyError"})," khi gọi m\xe0 instance framework chưa được khởi tạo\n"]})})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"export default {\n  async postBuild(gez) {\n    await gez.build();\n    // Tạo HTML tĩnh sau khi build\n    const render = await gez.render({\n      params: { url: '/' }\n    });\n    gez.writeSync(\n      gez.resolvePath('dist/client', 'index.html'),\n      render.html\n    );\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"server-1",children:["server()",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#server-1",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Gi\xe1 trị trả về"}),": ",(0,i.jsx)(e.code,{children:"Promise<void>"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"N\xe9m ra"}),": ",(0,i.jsx)(e.code,{children:"NotReadyError"})," - Khi framework chưa được khởi tạo"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Khởi động m\xe1y chủ HTTP v\xe0 cấu h\xecnh instance m\xe1y chủ. Được gọi trong c\xe1c v\xf2ng đời sau:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"M\xf4i trường ph\xe1t triển (dev): Khởi động m\xe1y chủ ph\xe1t triển, cung cấp cập nhật n\xf3ng"}),"\n",(0,i.jsx)(e.li,{children:"M\xf4i trường sản xuất (start): Khởi động m\xe1y chủ sản xuất, cung cấp hiệu suất cấp sản xuất"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"export default {\n  async server(gez) {\n    const server = http.createServer((req, res) => {\n      // Xử l\xfd t\xe0i nguy\xean tĩnh\n      gez.middleware(req, res, async () => {\n        // Render ph\xeda m\xe1y chủ\n        const render = await gez.render({\n          params: { url: req.url }\n        });\n        res.end(render.html);\n      });\n    });\n\n    server.listen(3000, () => {\n      console.log('Server running at http://localhost:3000');\n    });\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"postbuild-1",children:["postBuild()",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#postbuild-1",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Gi\xe1 trị trả về"}),": ",(0,i.jsx)(e.code,{children:"Promise<boolean>"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Thực thi logic xử l\xfd hậu build, d\xf9ng để:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Tạo c\xe1c tệp HTML tĩnh"}),"\n",(0,i.jsx)(e.li,{children:"Xử l\xfd c\xe1c sản phẩm build"}),"\n",(0,i.jsx)(e.li,{children:"Thực hiện c\xe1c t\xe1c vụ triển khai"}),"\n",(0,i.jsx)(e.li,{children:"Gửi th\xf4ng b\xe1o build"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="entry.node.ts"',children:"export default {\n  async postBuild(gez) {\n    // Tạo HTML tĩnh cho nhiều trang\n    const pages = ['/', '/about', '/404'];\n\n    for (const url of pages) {\n      const render = await gez.render({\n        params: { url }\n      });\n\n      await gez.write(\n        gez.resolvePath('dist/client', url.substring(1), 'index.html'),\n        render.html\n      );\n    }\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"resolvepath",children:["resolvePath",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#resolvepath",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"Ph\xe2n giải đường dẫn dự \xe1n, chuyển đổi đường dẫn tương đối th\xe0nh đường dẫn tuyệt đối."}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Tham số"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"projectPath: ProjectPath"})," - Loại đường dẫn dự \xe1n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"...args: string[]"})," - C\xe1c đoạn đường dẫn"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Gi\xe1 trị trả về"}),": ",(0,i.jsx)(e.code,{children:"string"})," - Đường dẫn tuyệt đối đ\xe3 ph\xe2n giải"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"V\xed dụ"}),":"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// Ph\xe2n giải đường dẫn t\xe0i nguy\xean tĩnh\nconst htmlPath = gez.resolvePath('dist/client', 'index.html');\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"writesync",children:["writeSync()",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#writesync",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"Ghi đồng bộ nội dung tệp."}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.strong,{children:"Tham số"})}),"\n"]})]})}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,h.ah)(),n.components);return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(s,{...n})}):s(n)}let d=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["vi%2Fapi%2Fcore%2Fgez.md"]={toc:[{text:"Giới thiệu",id:"giới-thiệu",depth:2},{text:"Định nghĩa kiểu",id:"định-nghĩa-kiểu",depth:2},{text:"RuntimeTarget",id:"runtimetarget",depth:3},{text:"ImportMap",id:"importmap",depth:3},{text:"SpecifierMap",id:"specifiermap",depth:4},{text:"ScopesMap",id:"scopesmap",depth:4},{text:"COMMAND",id:"command",depth:3},{text:"T\xf9y chọn instance",id:"t\xf9y-chọn-instance",depth:2},{text:"root",id:"root",depth:4},{text:"isProd",id:"isprod",depth:4},{text:"basePathPlaceholder",id:"basepathplaceholder",depth:4},{text:"modules",id:"modules",depth:4},{text:"packs",id:"packs",depth:4},{text:"devApp",id:"devapp",depth:4},{text:"server",id:"server",depth:4},{text:"postBuild",id:"postbuild",depth:4},{text:"Thuộc t\xednh instance",id:"thuộc-t\xednh-instance",depth:2},{text:"name",id:"name",depth:3},{text:"varName",id:"varname",depth:3},{text:"root",id:"root-1",depth:3},{text:"isProd",id:"isprod-1",depth:3},{text:"basePath",id:"basepath",depth:3},{text:"basePathPlaceholder",id:"basepathplaceholder-1",depth:3},{text:"middleware",id:"middleware",depth:3},{text:"render",id:"render",depth:3},{text:"COMMAND",id:"command-1",depth:3},{text:"moduleConfig",id:"moduleconfig",depth:3},{text:"packConfig",id:"packconfig",depth:3},{text:"Phương thức instance",id:"phương-thức-instance",depth:2},{text:"constructor()",id:"constructor",depth:3},{text:"init()",id:"init",depth:3},{text:"destroy()",id:"destroy",depth:3},{text:"build()",id:"build",depth:3},{text:"server()",id:"server-1",depth:3},{text:"postBuild()",id:"postbuild-1",depth:3},{text:"resolvePath",id:"resolvepath",depth:3},{text:"writeSync()",id:"writesync",depth:3}],title:"Gez",headingTitle:"Gez",frontmatter:{titleSuffix:"T\xe0i liệu tham khảo API lớp l\xf5i framework",description:"T\xe0i liệu chi tiết về API lớp l\xf5i của framework Gez, bao gồm quản l\xfd v\xf2ng đời ứng dụng, xử l\xfd t\xe0i nguy\xean tĩnh v\xe0 khả năng render ph\xeda m\xe1y chủ, gi\xfap nh\xe0 ph\xe1t triển hiểu s\xe2u về c\xe1c chức năng cốt l\xf5i của framework.",head:[["meta",{property:"keywords",content:"Gez, API, quản l\xfd v\xf2ng đời, t\xe0i nguy\xean tĩnh, render ph\xeda m\xe1y chủ, Rspack, Web application framework"}]]}}}}]);