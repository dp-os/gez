import { PackageManagerTabs } from '@theme';

# Vue
Gez 提供了 Vue 开箱即用的支持。
## 例子
- [vue2](https://github.com/dp-os/gez/tree/master/examples/ssr-vue2-remote)
- [vue3](https://github.com/dp-os/gez/tree/master/examples/ssr-vue3)

::: tip
自定义实现，需要基于 [@gez/rspack](../essentials/rspack.mdx) 来实现，Vue 相关的配置，可以在[这里](https://rspack.dev/guide/tech/vue)了解。
:::

## 安装依赖

## Vue2

<PackageManagerTabs command="install @gez/rspack-vue vue@2.7.16 vue-tsc vue-server-renderer@2.7.16 -D" />

### entry.node.ts

```ts
import type { GezOptions } from '@gez/core';

export default {
    // ...... 省略若干配置
    async createDevApp(gez) {
        return import('@gez/rspack-vue').then((m) => m.createVue2App(gez));
    }
} satisfies GezOptions;

```

### entry.server.ts

```ts
import type { RenderContext } from '@gez/core';
import { createRenderer } from 'vue-server-renderer';
import { createApp } from './create-app';

const renderer = createRenderer();

export default async (rc: RenderContext) => {
    const script = await rc.script();

    const { app } = createApp();
    const vueCtx = {
        renderStyles: () => ''
    };
    const html = await renderer.renderToString(app, vueCtx);

    rc.html = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gez</title>
    ${vueCtx.renderStyles()}
</head>
<body>
    ${html}
    ${script}
</body>
</html>
`;
};
```
::: tip
内部系统，还在大量使用 Vue2，未来 5 年还好持续维护。
:::

## Vue3
<PackageManagerTabs command="install @gez/rspack-vue vue -D" />

### entry.node.ts

```ts
import type { GezOptions } from '@gez/core';

export default {
    // ...... 省略若干配置
    async createDevApp(gez) {
        return import('@gez/rspack-vue').then((m) => m.createVue3App(gez));
    }
} satisfies GezOptions;

```

### entry.server.ts

```ts
import type { RenderContext } from '@gez/core';
import { renderToString } from 'vue/server-renderer';

import { createApp } from './create-app';

export default async (rc: RenderContext) => {
    const { app } = createApp('server');
    const script = await rc.script();
    const body = await renderToString(app, {});
    rc.html = `
  <!DOCTYPE html>
  <html>
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Gez</title>
  </head>
  <body>
      ${body}
      ${script}
  </body>
  </html>
  `;
};
```

::: tip
例子不够完整，欢迎提交 PR 补充完整例子。
:::