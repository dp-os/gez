---
titleSuffix: Абстрактный интерфейс приложения Gez
description: Подробное описание интерфейса App в фреймворке Gez, включая управление жизненным циклом приложения, обработку статических ресурсов и серверный рендеринг, чтобы помочь разработчикам понять и использовать основные функции приложения.
head:
  - - meta
    - property: keywords
      content: Gez, App, абстракция приложения, жизненный цикл, статические ресурсы, серверный рендеринг, API
---

# App

`App` — это абстракция приложения в фреймворке Gez, предоставляющая унифицированный интерфейс для управления жизненным циклом приложения, обработки статических ресурсов и серверного рендеринга.

```ts title="entry.node.ts"
export default {
  // Конфигурация для среды разработки
  async devApp(gez) {
    return import('@gez/rspack').then((m) =>
      m.createRspackHtmlApp(gez, {
        config(rc) {
          // Пользовательская конфигурация Rspack
        }
      })
    );
  }
}
```

## Определение типов
### App

```ts
interface App {
  middleware: Middleware;
  render: (options?: RenderContextOptions) => Promise<RenderContext>;
  build?: () => Promise<boolean>;
  destroy?: () => Promise<boolean>;
}
```

#### middleware

- **Тип**: `Middleware`

Промежуточное ПО для обработки статических ресурсов.

В среде разработки:
- Обрабатывает запросы статических ресурсов исходного кода
- Поддерживает горячую перезагрузку и компиляцию в реальном времени
- Использует стратегию кэширования no-cache

В производственной среде:
- Обрабатывает статические ресурсы после сборки
- Поддерживает долгосрочное кэширование неизменяемых файлов (например, .final.xxx)
- Оптимизированная стратегия загрузки ресурсов

```ts
server.use(gez.middleware);
```

#### render

- **Тип**: `(options?: RenderContextOptions) => Promise<RenderContext>`

Функция серверного рендеринга. В зависимости от среды выполнения предоставляет различные реализации:
- В производственной среде (start): загружает и выполняет рендеринг через серверный входной файл после сборки (entry.server)
- В среде разработки (dev): загружает и выполняет рендеринг через серверный входной файл из исходного кода

```ts
const rc = await gez.render({
  params: { url: '/page' }
});
res.end(rc.html);
```

#### build

- **Тип**: `() => Promise<boolean>`

Функция сборки для производственной среды. Используется для упаковки и оптимизации ресурсов. Возвращает true при успешной сборке и false при ошибке.

#### destroy

- **Тип**: `() => Promise<boolean>`

Функция очистки ресурсов. Используется для завершения работы сервера, разрыва соединений и т.д. Возвращает true при успешной очистке и false при ошибке.