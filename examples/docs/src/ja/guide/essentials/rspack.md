---
titleSuffix: Gez フレームワークの高性能ビルドエンジン
description: Gez フレームワークの Rspack ビルドシステムについて詳しく解説します。高性能コンパイル、マルチ環境ビルド、リソース最適化などのコア機能を紹介し、開発者が効率的で信頼性の高いモダンな Web アプリケーションを構築するのを支援します。
head:
  - - meta
    - property: keywords
      content: Gez, Rspack, ビルドシステム, 高性能コンパイル, ホットリロード, マルチ環境ビルド, Tree Shaking, コード分割, SSR, リソース最適化, 開発効率, ビルドツール
---

# Rspack

Gez は [Rspack](https://rspack.dev/) ビルドシステムを基盤として構築されており、Rspack の高性能ビルド能力を最大限に活用しています。このドキュメントでは、Gez フレームワークにおける Rspack の位置付けとコア機能について説明します。

## 特徴

Rspack は Gez フレームワークのコアビルドシステムであり、以下の主要な特徴を提供します：

- **高性能ビルド**：Rust で実装されたビルドエンジンにより、大規模プロジェクトのビルド速度を大幅に向上
- **開発体験の最適化**：ホットリロード（HMR）、インクリメンタルコンパイルなどのモダンな開発機能をサポートし、スムーズな開発体験を提供
- **マルチ環境ビルド**：クライアント（client）、サーバー（server）、Node.js（node）環境を統一的にサポートし、マルチプラットフォーム開発を簡素化
- **リソース最適化**：コード分割、Tree Shaking、リソース圧縮などの機能を内蔵し、リソース処理と最適化を実現

## アプリケーションのビルド

Gez の Rspack ビルドシステムはモジュール化設計を採用しており、以下のコアモジュールで構成されています：

### @gez/rspack

基礎ビルドモジュールで、以下のコア機能を提供します：

- **統一ビルド設定**：標準化されたビルド設定管理を提供し、マルチ環境設定をサポート
- **リソース処理**：TypeScript、CSS、画像などのリソース処理機能を内蔵
- **ビルド最適化**：コード分割、Tree Shaking などのパフォーマンス最適化機能を提供
- **開発サーバー**：高性能な開発サーバーを統合し、HMR をサポート

### @gez/rspack-vue

Vue フレームワーク専用のビルドモジュールで、以下の機能を提供します：

- **Vue コンポーネントのコンパイル**：Vue 2/3 コンポーネントの効率的なコンパイルをサポート
- **SSR 最適化**：サーバーサイドレンダリング（SSR）シナリオ向けの特定の最適化
- **開発機能強化**：Vue 開発環境向けの特定機能を強化

## ビルドプロセス

Gez のビルドプロセスは主に以下の段階に分かれています：

1. **設定の初期化**
   - プロジェクト設定を読み込み
   - デフォルト設定とユーザー設定をマージ
   - 環境変数に基づいて設定を調整

2. **リソースのコンパイル**
   - ソースコードの依存関係を解析
   - TypeScript、CSS などのリソースを変換
   - モジュールのインポート/エクスポートを処理

3. **最適化処理**
   - コード分割を実行
   - Tree Shaking を適用
   - コードとリソースを圧縮

4. **出力の生成**
   - ターゲットファイルを生成
   - リソースマップを出力
   - ビルドレポートを生成

## ベストプラクティス

### 開発環境の最適化

- **インクリメンタルコンパイル設定**：`cache` オプションを適切に設定し、キャッシュを活用してビルド速度を向上
- **HMR の最適化**：ホットリロードの範囲を適切に設定し、不要なモジュール更新を回避
- **リソース処理の最適化**：適切な loader 設定を使用し、重複処理を避ける

### 本番環境の最適化

- **コード分割戦略**：`splitChunks` を適切に設定し、リソースのロードを最適化
- **リソース圧縮**：適切な圧縮設定を有効化し、ビルド時間と出力サイズのバランスを取る
- **キャッシュ最適化**：コンテンツハッシュと長期キャッシュ戦略を活用し、ロードパフォーマンスを向上

## 設定例

```ts title="src/entry.node.ts"
import type { GezOptions } from '@gez/core';

export default {
    async devApp(gez) {
        return import('@gez/rspack').then((m) =>
            m.createRspackHtmlApp(gez, {
                // カスタムビルド設定
                config({ config }) {
                    // ここにカスタムの Rspack 設定を追加
                }
            })
        );
    },
} satisfies GezOptions;
```

::: tip
より詳細な API 説明と設定オプションについては、[Rspack API ドキュメント](/api/app/rspack.html)を参照してください。
:::